---
{"dg-publish":true,"permalink":"/programming/basic/leetcode/117-ii/","tags":["leetcode/tree/traverse/depth"]}
---


# [117. 填充每个节点的下一个右侧节点指针 II](https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/)

# Similar Question

leading to the advanced question

# Solution Tips

这次必须依赖 depth 了

# 方案一: DFS

```js
  var connect = function (root) {
    if (root == null) return root
  
    if (root.left != null) {
      if (root.right != null) {
        // 若右子树不为空，则左子树的 next 即为右子树
        root.left.next = root.right
      } else {
        // 若右子树为空，则左子树的 next 由根节点的 next 得出，next为根节点的父节点的右子树
        root.left.next = nextNode(root.next)
      }
    }
    if (root.right != null) {
      // 右子树的 next 由根节点的 next 得出
      root.right.next = nextNode(root.next)
    }
    // 先确保 root.right 下的节点的已完全连接，因 root.left 下的节点的连接
    // 需要 root.next 下的节点的信息，root.next肯定是祖先的右子树
    // 若 root.next 下的节点未完全连
    // 接（即先对 root.left 递归），则 root.next 下的信息链不完整，将
    // 返回错误的信息。可能出现的错误情况如下图所示。此时，底层最左边节点将无
    // 法获得正确的 next 信息：
    //                  o root
    //                 / \
    //     root.left  o —— o  root.right
    //               /    / \
    //              o —— o   o
    //             /        / \
    //            o        o   o
    connect(root.right)
    connect(root.left)
    return root
  
    function nextNode(node) {
      while (node != null) {
        if (node.left != null) return node.left
        if (node.right != null) return node.right
        node = node.next
      }
      return null
    }
  }
```

# 方案二: BFS

```js
  var connect = function(root) {
    if(root == null)return root;
    const queue = [root]
    while(queue.length>0){
      let cur = null
      // 一次读取一整行的node，静态化
      const size = queue.length
      for(let i=0;i<size;i++){
        const temp = queue.shift()
        if(cur !=null) cur.next = temp
        cur = temp
        // 这里改变了队列的长度，所以前面必须静态化
        if(temp.left!=null) queue.push(temp.left)
        if(temp.right!=null) queue.push(temp.right)
      }
    }
    return root
  }
```
