---
{"aliases":["状态模式","状态机"],"tags":[],"review-dates":[],"dg-publish":true,"date-created":"2023-10-18-Wed, 7:48:17 pm","date-modified":"2023-11-14-Tue, 9:13:46 pm","permalink":"/programming/basic/cs-basic/design-pattern/state-pattern/","dgPassFrontmatter":true}
---


基本常识：策略模式和状态模式是双胞胎，在出生时才分开。你已经知道了，策略模式是围绕可以互换的算法来创建成功业务的。然而，状态走的是更崇高的路，它通过改变对象内部的状态来帮助对象控制自己的行为。

它常常告诉它的对象客户跟着我念：我很棒，我很聪明，我最优秀

# 引入

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018195234902.png)

1. 首先，找出所有的状态
2. 接下来，创建一个实例变量来持有目前的状态，然后定义每个状态的值
3. 将所有系统中可以发生的动作整合起来

## 增加新的状态造成的混乱

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018195922514.png)

我们要做的事情是：首先，我们定义一个 State 接口。在这个接口内，糖果机的每个动作都有一个对应的方法

然后为机器中的每个状态实现状态类。这些类将负责在对应的状态下进行机器的行为

最后，我们要摆脱旧的条件代码，取而代之的方式是，将动作委托到状态类

现在我们要把一个状态的所有行为放在一个类中, 这么一来我们将行为局部化了, 并使得事情更容易改变和理解

## 定义状态接口和类

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018200343309.png)

## 完整的糖果机类

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018200807271.png)

每一个状态对修改关闭, 而糖果机对扩展开放，因为可以加入新的状态类

创建一个新的代码基和类结构，这更能映射万能糖果公司的图，而且更容易阅读和理解

# 定义

状态模式允许对象在内部状态改变时改变它的行为，对象看起来好像修改了它的类

这个描述中的第一部分附有相当多的涵义, 是吧? 因为这个模式将状态封装成为独立的类, 并将动作委托到代表当前状态的对象, 我们知道行为会随着内部状态而改变.

糖果机提供了一个很好的例子: 当糖果机是在 NoQuarterState 或 HasQuarterState 两种不同的状态时，你投入 25 分钱，就会得到不同的行为 (机器接受 25 分钱和机器拒绝 25 分钱)

而这个定义中的第二部分呢？ 一个对象**看起来好像修改了它的类**是什么意思呢？

从客户的视角来看：如果说你使用的对象能够完全改变它的行为, 那么你会觉得, 这个对象实际上是从别的类实例化而来的. 然而实际上, 你知道我们是在使用组合通过简单引用不同的状态对象来造成类改变的假象。

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018201159634.png)

# FAQ

## 策略模式的类图和状态机模式的类图长得一模一样

但是这两个模式的差别在于它们意图

以状态模式而言, 我们将一群行为封装在状态对象中, context 的行为随时可以委托到那些状态对象中的一个. 随着时间的流逝，当前状态在状态对象集合中游走改变，以反映出 context 内部的状态，因此， context 的行为也会跟着改变。但是 context 的客户对于状态对象了解不多，甚至根本是浑然不觉。

而以策略模式而言，客户通常主动指定 Context 所要组合的策略对象是哪一个。现在，固然策略模式让我们具有弹性，能够在运行时改变策略，但对于某个 context 对象来说，通常都只有一个最适当的策略对象。比方说，在第 1 章，有些鸭子（例如绿头鸭）被设置成利用典型的长翔行为进行飞翔，而有些鸭子（例如像皮鸭和诱饵鸭）使用的飞翔行为只能让它们紧贴地面.

一般来说，我们把策略模式想成是除了继承之外的一种弹性替代方案。如果你使用继承定义了一个类的行为，你将被这个行为困住，甚至要修改它都很难。有了策略模式，你可以通过组合不同的对象来改变行为。

我们把状态模式想成是不用在 context 中放置许多条件判断的替代方案。通过将行为包装进状态对象中.你可以通过在 context 内简单地改 变状态对象来改变 context 的行为。

![](/img/user/programming/basic/cs-basic/design-pattern/state-pattern/image-20231018202810620.png)

## 在 GumballMachine 中，状态决定了下一个 状态应该是什么。ConcreteState 总是决定接下来的状态是什么吗

不，并非总是如此，Coniext 也可以决定状态转换的流向。

一般来讲，当状态转换是固定的时候.就适合放在 Context 中；然而，当转换是更动态的时候,通常就会放在状态类中（例如,在 GumballMachine 中.由运行时糖果的数目来决定状态矣转换到 NoQuarter 还是 SoldOut）。 将状态转换放在状态类中的缺点是：状态类之间产生了 依赖。在我们的 GumballMachine 实现中，我们试图通过 使用 Context 上的 gelter 方法把依赖减到最小，而不是显式硬编码具体状态类。

请注意，在做这个决策的同时，也等于是在为另一件事情做决簸：当系统进化时,究竟哪个类是对修改封闭（ Context 还是状态类）的

```ad-question
放在 context 中时什么场景呢, 还是不太理解

比如说, 在执行了某个 action 之后, 一定会转换到某个状态, 这个状态的转换就可以放在 context 类中
```

## 客户会直接和状态交互吗?

不会。状态是用在 Context 中来代表它的内部状态以及行为的，所以只有 Context 才会对状态提出请求。客户不会直接改变 Context 的状态。全盘了解状态是 Context 的工作，客户根本不了解，所以不会直接和状态联系。

## 如果在我的程序中 Contexl 有许多实例，这些实例之间可以共享状态对象吗

是的，绝对可以，事实上这是很常见的做法。但唯一的前提是，你的状态对象不能持有它们自己的内部状态；否则就不能共享。

想要共享状态，你需要把每个状态都指定到静态的实例变更中。如果你的状态需要利用到 Context 中的方法或者实例变量，你还必须在每个 handler。方法内传入一个 context 的引用

## 使用状态模式似乎总是增加我们设计中类的 数目。请看**GumballMachine**的例子，新版本比旧版本多 出了许多类

没微，在个别的状态类中时装状态行为，结果总是增加这个设计中类的数目。这就是为了要获取弹性而付出的代价。除非你的代码是一次性的，可以用完就扔掉（是呀！才怪！），那么其实状态模式的设计是绝对值 得的。其实真正支要的是你暴露给客户的类数目，而且我们有办法将这些额外的状态类全都隐藏起来。

让我们看一下另一种做法：如果你有一个应用，它有很多状态，但是你决定不将这些状态封装在不同的对象 中，那么你就会得到巨大的、整块的条件语句。

这会让你的代码不容易维护和理解。通过使用许多对象，你可以让状态变得很干净，在以后理解和维护它们时，就可以省下很多的工夫。

## 状态模式类图显示 State 是一个抽象类,但 你不是使用接口实现糖果机状态的吗？

是的。如果我们没有共同的功能可以放进抽 象矣中，就会使用接口。在你实现状态模式时，很可能 想使用抽象类。这么一来，当你以后需卖在抽象类中加 入新的方法时就很容易，不需要打破具体状态的实现。

## 总感觉这里介绍的状态机和 xState 的不太一样呢

设计模式里的状态机, 通常描述的是一个明确的主体, 这个主体在不同的状态下都会执行相近的行为, 但是不同状态下的相同行为会导致不同的结果

而 xState 里的状态机, 更像是利用了状态机的思想来描述应用的状态流转的过程, 不同的状态下可执行的行为差异非常大

可以把 xState 拆分成多个状态机, 每个状态机更接近我们传统意义上的状态机

# xStete 关于状态机和状态图的介绍

可以更好的理解状态机相关的概念和复杂状态机所需要的新概念

状态图（statecharts）是一种图形语言，它用来描述过程中的状态。

你可能也用过类似的图，来设计用户流程图、规划数据库、或者构建 APP 架构。状态图（statecharts）是换种方式，用一堆盒子和箭头，来给人展示什么叫流程。不过，有了 XState，我们就能用代码来管理应用逻辑了。

## 状态 States

我们用圆角矩形盒子来展示*状态*。为狗的过程，绘制状态图，首先会想到两种状态：

<svg width="780" height="300" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g id="asleep-awake"><path fill="#E3E9F3" d="M0 0h780v300H0z"/><g id="atomic-state" transform="translate(490 20)"><rect id="state" fill="#555762" x="0" y="0" width="150" height="50" rx="15"/><text id="label" font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="35" y="35">awake</tspan></text></g><g id="atomic-state" transform="translate(140 20)"><rect id="state" fill="#555762" x="0" y="0" width="150" height="50" rx="15"/><text id="label" font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="33" y="35">asleep</tspan></text></g><g id="dog-awake" transform="translate(500 120)"><path d="M67.806 152c-.569 0-1.142-.004-1.726-.012C29.216 151.476 0 137.05 0 132.108c0-4.944 8.996-6.215 36.75-6.215 27.748 0 53.117 10.267 57.735 12.618C104.009 143.358 94.25 152 67.806 152" id="Fill-4" fill-opacity=".25" fill="#000"/><path d="M27.843 76.723c3.503 2.453-4.335 3.51-6.324 2.695C13.727 76.214 5.54 65.085 2.863 57.004c-.572-1.727-.777-4.108.767-4.941 1.51-.816 3.297.583 4.297 2.012 6.263 8.949 12.87 17.713 19.916 22.648" id="Fill-5" fill="#CBCCD0"/><path d="M40.527 121.216c1.902 4.475 4.66 10.641 9.202 12.999 2.79 1.448 6.171.821 8.295-1.157.603-.56 1.128-1.237 1.37-2.055.24-.818.165-1.796-.343-2.555-.685-1.023-1.965-1.44-2.77-2.372-1.772-2.05-1.263-7.14-1.132-9.528.2-3.636.823-7.19 1.398-10.74.378-2.33.73-4.686.612-7.096-.267-5.396-2.924-10.692-6.502-14.972-4.277-5.114-14.554-10.735-18.821-3.723-1.867 3.068-.492 7.425.216 10.887.979 4.793 1.984 9.586 3.207 14.343 1.39 5.407 3.06 10.777 5.268 15.969" id="Fill-6" fill="#ABADB3"/><path d="M87.593 88.832a11.598 11.598 0 00-1.557 3.57c-.756 3.054-.563 6.19-.84 9.297-.74 8.33-4.775 14.008-5.488 14.66-2.87 2.626-4.754-2.354-8.073-.633-4.274 2.216-3.022 12.714 7.37 13.309 7.683.442 14.631-10.444 17.276-17.2 2.506-6.4 3.814-16.125 2.262-22.543-.695-2.88-3.087-4.532-6.522-3.773-1.856.411-3.357 1.698-4.428 3.313" id="Fill-7" fill="#FFFFFE"/><path d="M96.669 96.91c2.079-3.826 2.629-9.188.462-13.226-1.026-1.91-2.552-3.371-4.117-4.66-5.937-4.89-13.71-6.08-21.127-6.79-7.526-.721-16.02-2.124-23.52-3.202-13.155-1.893-25.717 2.684-27.213 5.308-2.29 4.016 1.785 10.304 1.351 14.794-.545 5.648-1.347 12.638 5.364 14.75 2.753.866 5.708.73 8.57 1.115 2.792.377 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.236 12-.992 16.055-5.829 20.444-13.908" id="Fill-8" fill="#FFFFFE"/><path d="M70.277 114.333c-2.053.777-3.556 2.715-4.042 4.85-.13.575-.195 1.17-.116 1.754.164 1.207.956 2.287 2 2.92 1.045.632 2.317.84 3.531.705 2.046-.23 3.978-1.47 4.932-3.289.87-1.657 1.04-4.403-.45-5.773-1.54-1.416-3.898-1.905-5.855-1.167" id="Fill-9" fill="#FFFFFE"/><path d="M54.178 105.338c-5.04-1.131-9.96-2.772-15.032-3.746-4.9-.94-10.248-1.098-15.22-.388.87 1.167 2.123 2.107 3.943 2.68 2.753.866 5.708.73 8.57 1.115 2.792.378 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.237 7.725-.64 12.155-2.874 15.505-6.54a76.674 76.674 0 01-37.552 1.058" id="Fill-10" fill="#CBCCD0"/><path d="M60.052 92.562s.924 18.39 11.97 48.093l-12.766 4.105s-16.605-34.1-16.878-61.326l17.674 9.128" id="Fill-11" fill="#FFFFFE"/><path d="M78.464 141.467c1.94 5.617-3.182 7.6-8.604 8.47-6.99 1.123-9.279-.693-10.686-4.127-1.401-3.428 1.775-7.183 7.102-8.383 5.327-1.2 10.987.556 12.188 4.04" id="Fill-12" fill="#FFFFFE"/><path d="M1.284 127.942c.859 1.847 2.204 3.595 6.766 3.27 4.028-.29 4.5-2.478 3.717-4.238-.368-.827-.897-.848-.978-2.282-.457-8.084-.467-9.982 3.737-13.676 1.21-1.063 3.595-.176 5.15-.146 4.622.089 9.066-2.867 11.744-6.816 3-4.423 4.832-9.917 5.5-15.271.569-4.555-.04-10.186-2.438-13.726-2.607-3.85-8.648-3.67-12.377-1.76-3.342 1.715-6.256 4.597-8.724 7.844C.003 98.74.475 126.205 1.284 127.942" id="Fill-13" fill="#FFFFFE"/><path d="M53.833 68.844c-1.163 3.165-1.239 8.742-.055 11.85 1.126 2.958 3.272 5.552 5.239 7.405 4.348 4.102 9.773 5.96 14.988 6.321 7.644.53 15.597.47 21.832-6.189 3.11-3.323 5.732-6.742 6.285-12.354 1.451-14.73-8.676-18.05-17.317-20.183-8.137-2.005-20.627-3.446-26.746 5.989-1.317 2.03-3.324 4.71-4.226 7.16" id="Fill-14" fill="#F26200"/><path d="M44.692 30.243c1.549-12.2 17.777-17.841 28.265-20.268 1.886-.436 4.147-.712 6.624-.832 2.467-.243 4.743-.3 6.675-.144 10.729.87 27.606 4.083 30.918 15.926 2.644 9.45-.957 19.755-4.2 29.641-1.48 4.514-3.041 9.074-3.156 13.347-.344 12.693-11.272 21.047-23.1 21.155-11.827.11-24.366-6.143-28.071-17.622-1.312-4.07-3.35-8.242-5.473-12.493-4.651-9.306-9.716-18.976-8.482-28.71" id="Fill-15" fill="#FFFFFE"/><path d="M58.093 69.834c-1.297-3.557-3.075-7.189-4.92-10.88-4.65-9.307-9.715-18.977-8.48-28.711.631-4.98 3.71-8.865 7.843-11.886 7.256 5.853 17.846 5.088 24.834 11.928 8.217 8.045 5.428 21.632-2.94 28.233-2.785 2.199-6.31 2.74-9.257 4.627-2.606 1.67-4.766 4.49-7.08 6.689" id="Fill-16" fill="#C17358"/><path d="M59.01 44.508c.339 4.61 2.724 8.191 5.329 8 2.605-.192 4.443-4.082 4.104-8.692-.338-4.608-2.723-8.19-5.329-7.999-2.605.191-4.441 4.083-4.104 8.691" id="Fill-17" fill="#0F0F0D"/><path d="M95.66 41.82c.338 4.608 2.724 8.19 5.328 8 2.606-.192 4.444-4.084 4.105-8.693-.338-4.608-2.724-8.19-5.33-8-2.604.192-4.442 4.084-4.104 8.692" id="Fill-18" fill="#0F0F0D"/><path d="M133.16 24.271c-.136 4.429-1.948 7.952-7 7.833-7.922-.187-28.77-15.105-30.646-16.518-2.36-1.78-4.787-3.719-2.773-7.135 2.283-3.867 8.819-5.745 12.856-7.046 17.16-5.531 28.08 5.925 27.563 22.866" id="Fill-19" fill="#9A7560"/><path d="M28.783 31.93c.783 4.36 3.089 7.582 8.07 6.727 7.81-1.342 26.257-19.143 27.906-20.815 2.075-2.105 4.19-4.377 1.7-7.462-2.82-3.493-9.56-4.396-13.748-5.094-17.782-2.968-26.914 9.96-23.928 26.644" id="Fill-20" fill="#9A7560"/><path d="M90.933 79.125c-.313.122-.592.51-.871.653-.967.496-2.255.635-3.324.661a10.11 10.11 0 01-3.353-.48c-.426-.139-2.63-.861-2.682-1.37.286 2.72 2.297 5.108 4.828 6.147 2.53 1.04 5.479.819 7.98-.29 2.501-1.109 4.576-3.045 6.157-5.278-.698.984-3.74 1.11-4.805 1.071-.734-.026-1.65-.085-2.338-.361-.427-.172-.944-.798-1.413-.791l-.179.038" id="Fill-21" fill="#AC3C4A"/><path d="M84.894 62.27c1.385-1.026 3.827-1.673 6.418-1.834l.01-.001h.012c2.587-.22 5.095.065 6.617.877 7.243 3.871 1.194 10.782-5.687 11.814v.002h-.008l-.011.002v-.002c-6.958-.016-13.953-5.97-7.351-10.859" id="Fill-22" fill="#4D3422"/><path d="M91.728 80.332c.517.063.99-.332 1.057-.883l1.069-8.744c.067-.55-.297-1.049-.814-1.112-.518-.063-.99.332-1.059.883l-1.068 8.745c-.067.55.297 1.048.815 1.111" id="Fill-23" fill="#4D3422"/><path d="M80.052 76.99c.423-.317 1.014-.205 1.315.252.855 1.291 3.592 2.54 4.95 2.719 1.967.259 3.419-.37 4.94-1.41l-.006-.082.077.035.069-.045.005.081c1.657.808 3.185 1.217 5.092.675 1.319-.376 3.844-2.01 4.501-3.414.232-.495.798-.692 1.264-.441.467.251.657.855.426 1.35-1.015 2.17-4.193 4.02-5.687 4.445-.58.166-1.13.262-1.654.3-1.447.107-2.7-.229-3.852-.707-1.07.642-2.26 1.156-3.708 1.262a8.128 8.128 0 01-1.681-.055c-1.54-.202-4.954-1.568-6.274-3.568-.301-.455-.202-1.081.223-1.398" id="Fill-24" fill="#4D3422"/></g><g id="dog-asleep" transform="translate(140 173)"><path d="M75.62 102c-34.069 0-61.68-5.939-61.68-13.268 0-3.345 5.76-6.398 15.246-8.731-.459-.653-.698-1.32-.698-2 0-7.333 27.61-13.272 61.68-13.272 34.06 0 61.671 5.94 61.671 13.272 0 3.343-5.76 6.395-15.246 8.729.459.653.699 1.321.699 2.002 0 7.33-27.612 13.268-61.671 13.268z" id="Clip-148" fill-opacity=".25" fill="#000"/><path d="M110.94 48.857c-3.968-.46 1.986-5.455 3.982-5.726 7.822-1.049 19.513 4.99 25.32 11.054 1.241 1.295 2.473 3.382 1.58 4.94-.875 1.526-2.964 1.156-4.424.354-9.136-5.022-18.473-9.696-26.458-10.622" id="Fill-150" fill="#CBCCD0"/><path d="M54.348 38.5c.193-.243.39-.483.59-.723 7.758-9.294 18.395-13.71 29.647-12.487 10.835 1.177 29.223 8.438 39.845 23.07 8.443 11.63-8.067 34.474-19.31 39.426-4.809 2.12-10.041 2.53-15.18 2.917l-13.215.995c-9.9.746-21.553.636-27.413-8.323-2.14-3.275-3.153-7.35-3.507-11.415-1.125-12.955.812-23.792 8.543-33.46" id="Fill-151" fill="#FFFFFE"/><path d="M121.08 45.145c6 5.267 4.529 9.806 14.937 16.842 2.868 1.94 7.074 3.734 9.868 5.95 3.847 3.05 4.554 5.305 4.62 9.052.096 5.533-6.747 5.25-8.436 4.14-9.515-6.255-21.167-.73-31.723-4.92-2.212-.876-4.412-1.875-6.358-3.409-3.619-2.853-6.129-7.4-7.817-12.222-.611-1.748-1.134-3.578-1.202-5.484-.173-4.852 3.324-13.72 7.4-15.598 6.166-2.84 13.845 1.378 18.711 5.65" id="Fill-152" fill="#FFFFFE"/><path d="M99.564 90.94c-6.216.72-23.674 3.457-25.565-6.786-.86-4.664.352-10.839 1.252-15.426a84.435 84.435 0 012.866-10.785c1.87-5.529 5.256-5.61 10.313-7.17 6.537-2.015 28.62 27.42 24.173 30.296-4.447 2.877-7.955 9.282-13.039 9.87" id="Fill-153" fill="#ABADB3"/><path d="M109.756 54.96c-5.509 5.022-13.567 5.022-13.585 5.618-.148 5.202 4.198 9.369 7.817 12.222 1.946 1.534 4.146 2.533 6.358 3.409 6.939 2.754 14.35 1.31 21.319 1.775-5.999-3.562-18.58-10.899-21.909-23.024" id="Fill-154" fill="#ABADB3"/><path d="M111.228 89.847c1.053-2.127 1.215-4.824.196-6.945-.817-1.7-2.518-3.376-4.128-4.078-1.78-.778-3.84.055-5.78-.055-3.425-.192-7.573-.247-10.93-1.018-4.094-.939-7.434-3.404-11.291-5.13-4.877-2.183-10.342-3.026-15.279-.906-3.92 1.684-9.448 7.257-7.33 12.376 1.96 4.74 8.024 7.215 12.051 8.096 6.042 1.322 12.48 1.244 18.616 1.451a390.8 390.8 0 0012.294.226c3.79.01 7.883.937 10.75-2.696.32-.404.597-.849.831-1.321" id="Fill-155" fill="#FFFFFE"/><path d="M111.424 82.902c-.817-1.7-2.518-3.376-4.128-4.078-1.78-.778-3.84.054-5.78-.054-.873-.05-1.793-.09-2.735-.135 2.205 1.33 3.905 3.858 3.82 5.994-.294 7.37-5.512 8.514-6.13 9.201 1.058.013 2.117.031 3.176.034 3.79.01 7.883.937 10.75-2.696.32-.404.597-.848.831-1.321 1.053-2.127 1.215-4.824.196-6.945" id="Fill-156" fill="#ABADB3"/><path d="M82.453 85.052c3.499-3.929 5.81-9.148 6.623-14.624.21-1.412.322-2.866.068-4.263-.255-1.397-.917-2.743-1.985-3.502-.89-.631-1.98-.809-3.035-.79-2.484.042-4.888 1.087-7.065 2.458-4.612 2.904-8.399 7.274-11.516 12.085-1.801 2.78-6.626 10.466-3.34 13.665.374.362.838.582 1.294.795l2.09.976c2.623 1.225 6.149.063 8.776-1.009 3.024-1.234 5.807-3.229 8.09-5.791" id="Fill-157" fill="#ABADB3"/><path d="M122.577 92.357c3.642 1.327 8.196 1.852 10.69-1.154 1.695-2.045 1.993-5.243 1.118-7.84-.874-2.596-2.886-4.122-5.016-5.512-2.264-1.477-4.884-2.29-7.293-3.526-7.313-3.753-29.259-29.707-34.384-30.888-4.07-.936-11.253.394-11.776 5.9-.484 5.098 6.535 12.558 9.537 15.686 5.463 5.691 11.824 9.4 17.945 13.92 5.417 3.996 10.447 8.922 16.303 12.12.832.453 1.815.908 2.876 1.294" id="Fill-158" fill="#FFFFFE"/><path d="M44.208 77.639c2.962 3.117 9.069 6.581 13.024 7.255 3.766.643 7.59.019 10.52-.872 6.479-1.968 12.004-5.015 14.753-10.143 4.033-7.518 6.525-17.095 2.006-27.532-2.257-5.21-4.838-9.974-10.77-13.95-15.566-10.435-23.791-2.07-30.039 5.496-5.879 7.125-13.101 19.057-5.473 31.063 1.642 2.585 3.687 6.27 5.98 8.683" id="Fill-159" fill="#F26200"/><path d="M14.559 88.013c-4.941-3.939-8.483-10.017-9.61-19.456-1.627-13.607 1.417-28.206 9.38-38.702C22.293 19.36 35.367 13.627 47.2 16.792c7.137 1.907 13.379 6.735 18.843 12.221 7.467 7.498 14.012 16.869 15.953 27.965 4.19 23.946-11.28 39.332-31.043 38.687-12.553-.408-27.003-.165-36.394-7.652" id="Fill-160" fill="#FFFFFE"/><path d="M50.953 95.665c4.15.136 8.104-.444 11.733-1.653.316-2.795-.336-5.668-.997-8.41-.925-3.833-2.012-7.91-4.746-10.399-2.89-2.631-7.086-2.846-10.637-1.51-3.55 1.334-6.58 4.005-9.417 6.772a130.248 130.248 0 00-7.986 8.525c-1.207 1.41-2.406 2.839-3.66 4.202 8.026 2.214 17.294 2.2 25.71 2.473" id="Fill-161" fill="#C17358"/><path d="M56.953 10.376c2.768 3.589 3.771 7.7.134 11.33-5.702 5.694-30.04 9.312-32.276 9.582-2.815.337-5.78.6-6.569-3.576-.893-4.729 2.498-11.026 4.501-15.028C31.255-4.323 46.36-3.35 56.953 10.376" id="Fill-162" fill="#9A7560"/><path d="M25.68 98.709c4.18-.835 7.287-3.315 6.524-8.692-1.197-8.429-18.016-28.368-19.597-30.15-1.991-2.245-4.14-4.531-7.118-1.85-3.372 3.035-4.312 10.305-5.025 14.82-3.036 19.178 9.226 29.058 25.216 25.872" id="Fill-163" fill="#9A7560"/><path d="M81.996 56.978a40.358 40.358 0 00-.311-1.54c-.959-1.237-2.497-2.027-3.899-1.546-.44.151-.874.453-1.05.932-.087.235-.104.492-.102.745.01 2.312 1.455 4.23 2.406 6.27 1.1 2.36 1.556 5.096 1.335 7.762-.116 1.41-1.919 5.215-.82 6.243.378.353.856.34 1.319.135 1.858-5.436 2.378-11.831 1.122-19.001" id="Fill-164" fill="#AC3C4A"/><path d="M70.22 83.206c.028-1.752.839-4.264 2.045-6.672l.004-.008.005-.01c1.167-2.433 2.624-4.544 3.928-5.509 6.213-4.593 7.692 4.253 4.886 10.942h.002l-.004.007-.005.012h-.002c-3.534 6.239-10.99 9.58-10.86 1.238" id="Fill-165" fill="#4D3422"/><path d="M49.054 78.416c1.48-1.533 4.859 3.74 2.69 8.82-2.168 5.08-8.3 7.834-8.598 5.413-.298-2.421 4.239-1.968 5.878-6.455 1.64-4.488-1.449-6.244.03-7.778" id="Fill-166" fill="#0F0F0D"/><path d="M60.34 46.782c1.17-1.842 5.45 2.518 4.255 7.985-1.195 5.466-6.703 9.586-7.438 7.29-.736-2.295 3.794-2.91 4.58-7.674.784-4.764-2.565-5.759-1.397-7.6" id="Fill-167" fill="#0F0F0D"/></g></g></g></svg>

狗总是 **睡着（asleep）** 或 **醒着（awake）**。狗不能同时睡着和醒着，狗也不可能不睡不醒。只有这两种状态，没其它的了，这就是我们说的有限数量的状态。

## 转换与事件 Transitions and Events

狗在 **睡着** 和 **醒着** 之间的变化，是通过转换来表示的，它用一个箭头表示，从一个状态指向过程序列中的下一个状态。

<svg width="780" height="420" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><path fill="#E3E9F3" d="M0 0h780v479H0z"/><path d="M210 100V60c.064-13.334 6.73-20 20-20h315c13.333.385 20 7.052 20 20v39.667M210 150v39.666c.064 13.334 6.73 20 20 20h315c13.333-.385 20-7.052 20-20V150" stroke="#555762" stroke-width="3"/><g transform="translate(488.869 99.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="34.326" y="35">awake</tspan></text></g><g transform="translate(139.869 99.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="32.451" y="35">asleep</tspan></text></g><path d="M565.806 399.558c-.569 0-1.142-.005-1.726-.013-36.864-.511-66.08-14.938-66.08-19.88 0-4.944 8.996-6.215 36.75-6.215 27.748 0 53.117 10.267 57.735 12.618 9.524 4.847-.235 13.49-26.679 13.49" fill-opacity=".25" fill="#000"/><path d="M525.843 324.28c3.503 2.453-4.335 3.511-6.324 2.696-7.792-3.204-15.979-14.333-18.656-22.414-.572-1.727-.777-4.108.767-4.941 1.51-.816 3.297.582 4.297 2.012 6.263 8.948 12.87 17.713 19.916 22.648" fill="#CBCCD0"/><path d="M538.527 368.773c1.902 4.476 4.66 10.642 9.202 13 2.79 1.448 6.171.82 8.295-1.158.603-.56 1.128-1.237 1.37-2.055.24-.818.165-1.795-.343-2.554-.685-1.023-1.965-1.441-2.77-2.373-1.772-2.05-1.263-7.14-1.132-9.527.2-3.636.823-7.19 1.398-10.74.378-2.33.73-4.687.612-7.096-.267-5.397-2.924-10.693-6.502-14.973-4.277-5.113-14.554-10.735-18.821-3.722-1.867 3.068-.492 7.424.216 10.887.979 4.792 1.984 9.585 3.207 14.342 1.39 5.408 3.06 10.778 5.268 15.97" fill="#ABADB3"/><path d="M585.593 336.39a11.598 11.598 0 00-1.557 3.57c-.756 3.053-.563 6.19-.84 9.297-.74 8.329-4.775 14.007-5.488 14.66-2.87 2.626-4.754-2.354-8.073-.633-4.274 2.216-3.022 12.713 7.37 13.309 7.683.441 14.631-10.445 17.276-17.2 2.506-6.4 3.814-16.125 2.262-22.543-.695-2.881-3.087-4.533-6.522-3.773-1.856.41-3.357 1.697-4.428 3.313" fill="#FFFFFE"/><path d="M594.669 344.468c2.079-3.827 2.629-9.188.462-13.226-1.026-1.91-2.552-3.372-4.117-4.66-5.937-4.89-13.71-6.08-21.127-6.79-7.526-.722-16.02-2.124-23.52-3.203-13.155-1.893-25.717 2.685-27.213 5.308-2.29 4.017 1.785 10.305 1.351 14.795-.545 5.647-1.347 12.637 5.364 14.749 2.753.866 5.708.73 8.57 1.116 2.792.377 5.397 1.31 8.062 2.171 2.332.752 4.803.601 7.132 1.412 7.081 2.464 17.037 2.862 24.592 2.237 12-.993 16.055-5.829 20.444-13.909M568.277 361.891c-2.053.776-3.556 2.715-4.042 4.85-.13.574-.195 1.17-.116 1.753.164 1.208.956 2.287 2 2.92 1.045.633 2.317.84 3.531.705 2.046-.23 3.978-1.47 4.932-3.288.87-1.658 1.04-4.403-.45-5.773-1.54-1.417-3.898-1.906-5.855-1.167" fill="#FFFFFE"/><path d="M552.178 352.895c-5.04-1.13-9.96-2.772-15.032-3.745-4.9-.941-10.248-1.098-15.22-.388.87 1.166 2.123 2.106 3.943 2.679 2.753.867 5.708.73 8.57 1.116 2.792.378 5.397 1.31 8.062 2.171 2.332.752 4.803.601 7.132 1.412 7.081 2.464 17.037 2.862 24.592 2.237 7.725-.639 12.155-2.873 15.505-6.539a76.674 76.674 0 01-37.552 1.057" fill="#CBCCD0"/><path d="M558.052 340.12s.924 18.39 11.97 48.092l-12.766 4.106s-16.605-34.1-16.878-61.326l17.674 9.128" fill="#FFFFFE"/><path d="M576.464 389.024c1.94 5.617-3.182 7.6-8.604 8.471-6.99 1.123-9.279-.694-10.686-4.128-1.401-3.427 1.775-7.182 7.102-8.383 5.327-1.199 10.987.556 12.188 4.04M499.284 375.5c.859 1.847 2.204 3.595 6.766 3.269 4.028-.289 4.5-2.477 3.717-4.237-.368-.827-.897-.848-.978-2.282-.457-8.084-.467-9.983 3.737-13.676 1.21-1.063 3.595-.176 5.15-.147 4.622.09 9.066-2.867 11.744-6.816 3-4.423 4.832-9.917 5.5-15.27.569-4.556-.04-10.187-2.438-13.727-2.607-3.85-8.648-3.67-12.377-1.759-3.342 1.714-6.256 4.596-8.724 7.843-13.378 17.601-12.906 45.064-12.097 46.802" fill="#FFFFFE"/><path d="M551.833 316.401c-1.163 3.166-1.239 8.743-.055 11.85 1.126 2.958 3.272 5.552 5.239 7.406 4.348 4.102 9.773 5.96 14.988 6.32 7.644.53 15.597.47 21.832-6.188 3.11-3.324 5.732-6.742 6.285-12.355 1.451-14.73-8.676-18.05-17.317-20.183-8.137-2.005-20.627-3.445-26.746 5.99-1.317 2.03-3.324 4.709-4.226 7.16" fill="#F26200"/><path d="M542.692 277.8c1.549-12.199 17.777-17.84 28.265-20.267 1.886-.436 4.147-.713 6.624-.833 2.467-.242 4.743-.3 6.675-.143 10.729.87 27.606 4.083 30.918 15.926 2.644 9.449-.957 19.755-4.2 29.64-1.48 4.515-3.041 9.074-3.156 13.348-.344 12.693-11.272 21.046-23.1 21.155-11.827.109-24.366-6.143-28.071-17.622-1.312-4.07-3.35-8.243-5.473-12.493-4.651-9.306-9.716-18.977-8.482-28.71" fill="#FFFFFE"/><path d="M556.093 317.391c-1.297-3.556-3.075-7.188-4.92-10.88-4.65-9.306-9.715-18.977-8.48-28.71.631-4.98 3.71-8.866 7.843-11.887 7.256 5.854 17.846 5.089 24.834 11.929 8.217 8.044 5.428 21.632-2.94 28.232-2.785 2.2-6.31 2.74-9.257 4.627-2.606 1.67-4.766 4.491-7.08 6.69" fill="#C17358"/><path d="M557.01 292.066c.339 4.61 2.724 8.19 5.329 8 2.605-.192 4.443-4.083 4.104-8.692-.338-4.609-2.723-8.19-5.329-8-2.605.192-4.441 4.083-4.104 8.692M593.66 289.377c.338 4.609 2.724 8.19 5.328 8 2.606-.191 4.444-4.083 4.105-8.692-.338-4.609-2.724-8.19-5.33-8-2.604.192-4.442 4.083-4.104 8.692" fill="#0F0F0D"/><path d="M631.16 271.829c-.136 4.428-1.948 7.951-7 7.833-7.922-.188-28.77-15.105-30.646-16.519-2.36-1.78-4.787-3.718-2.773-7.134 2.283-3.867 8.819-5.745 12.856-7.046 17.16-5.532 28.08 5.925 27.563 22.866M526.783 279.487c.783 4.361 3.089 7.583 8.07 6.728 7.81-1.342 26.257-19.143 27.906-20.815 2.075-2.106 4.19-4.377 1.7-7.463-2.82-3.492-9.56-4.396-13.748-5.094-17.782-2.967-26.914 9.96-23.928 26.644" fill="#9A7560"/><path d="M588.933 326.682c-.313.123-.592.51-.871.653-.967.496-2.255.635-3.324.662a10.11 10.11 0 01-3.353-.48c-.426-.14-2.63-.862-2.682-1.37.286 2.72 2.297 5.107 4.828 6.147 2.53 1.04 5.479.818 7.98-.29 2.501-1.11 4.576-3.045 6.157-5.279-.698.985-3.74 1.11-4.805 1.072-.734-.027-1.65-.086-2.338-.362-.427-.171-.944-.797-1.413-.79l-.179.037" fill="#AC3C4A"/><path d="M582.894 309.827c1.385-1.025 3.827-1.673 6.418-1.834h.01l.012-.001c2.587-.22 5.095.066 6.617.877 7.243 3.872 1.194 10.783-5.687 11.815v.002h-.008l-.011.001v-.002c-6.958-.016-13.953-5.97-7.351-10.858" fill="#4D3422"/><path d="M589.728 327.89c.517.063.99-.333 1.057-.883l1.069-8.744c.067-.551-.297-1.049-.814-1.113-.518-.063-.99.333-1.059.883l-1.068 8.746c-.067.55.297 1.048.815 1.11" fill="#4D3422"/><path d="M578.052 324.547c.423-.317 1.014-.205 1.315.252.855 1.292 3.592 2.54 4.95 2.72 1.967.258 3.419-.37 4.94-1.41l-.006-.083.077.036.069-.045.005.08c1.657.809 3.185 1.217 5.092.675 1.319-.375 3.844-2.01 4.501-3.413.232-.496.798-.693 1.264-.442.467.252.657.856.426 1.35-1.015 2.171-4.193 4.021-5.687 4.446-.58.165-1.13.261-1.654.3-1.447.106-2.7-.229-3.852-.707-1.07.641-2.26 1.155-3.708 1.262a8.128 8.128 0 01-1.681-.055c-1.54-.202-4.954-1.568-6.274-3.568-.301-.456-.202-1.082.223-1.398" fill="#4D3422"/><g><path d="M215.62 400c-34.069 0-61.68-5.939-61.68-13.268 0-3.345 5.76-6.398 15.246-8.731-.459-.653-.698-1.32-.698-2 0-7.333 27.61-13.272 61.68-13.272 34.06 0 61.671 5.94 61.671 13.272 0 3.343-5.76 6.395-15.246 8.729.459.653.699 1.321.699 2.002 0 7.33-27.612 13.268-61.671 13.268z" fill-opacity=".25" fill="#000"/><path d="M250.94 346.857c-3.968-.46 1.986-5.455 3.982-5.726 7.822-1.049 19.513 4.99 25.32 11.054 1.241 1.295 2.473 3.382 1.58 4.94-.875 1.526-2.964 1.156-4.424.354-9.136-5.022-18.473-9.696-26.458-10.622" fill="#CBCCD0"/><path d="M194.348 336.5c.193-.243.39-.483.59-.723 7.758-9.294 18.395-13.71 29.647-12.487 10.835 1.177 29.223 8.438 39.845 23.07 8.443 11.63-8.067 34.474-19.31 39.426-4.809 2.12-10.041 2.53-15.18 2.917l-13.215.995c-9.9.746-21.553.636-27.413-8.323-2.14-3.275-3.153-7.35-3.507-11.415-1.125-12.955.812-23.792 8.543-33.46" fill="#FFFFFE"/><path d="M261.08 343.145c6 5.267 4.529 9.806 14.937 16.842 2.868 1.94 7.074 3.734 9.868 5.95 3.847 3.05 4.554 5.305 4.62 9.052.096 5.533-6.747 5.25-8.436 4.14-9.515-6.255-21.167-.73-31.723-4.92-2.212-.876-4.412-1.875-6.358-3.409-3.619-2.853-6.129-7.4-7.817-12.222-.611-1.748-1.134-3.578-1.202-5.484-.173-4.852 3.324-13.72 7.4-15.598 6.166-2.84 13.845 1.378 18.711 5.65" fill="#FFFFFE"/><path d="M239.564 388.94c-6.216.72-23.674 3.457-25.565-6.786-.86-4.664.352-10.839 1.252-15.426a84.435 84.435 0 012.866-10.785c1.87-5.529 5.256-5.61 10.313-7.17 6.537-2.015 28.62 27.42 24.173 30.296-4.447 2.877-7.955 9.282-13.039 9.87" fill="#ABADB3"/><path d="M249.756 352.96c-5.509 5.022-13.567 5.022-13.585 5.618-.148 5.202 4.198 9.369 7.817 12.222 1.946 1.534 4.146 2.533 6.358 3.409 6.939 2.754 14.35 1.31 21.319 1.775-5.999-3.562-18.58-10.899-21.909-23.024" fill="#ABADB3"/><path d="M251.228 387.847c1.053-2.127 1.215-4.824.196-6.945-.817-1.7-2.518-3.376-4.128-4.078-1.78-.778-3.84.055-5.78-.055-3.425-.192-7.573-.247-10.93-1.018-4.094-.939-7.434-3.404-11.291-5.13-4.877-2.183-10.342-3.026-15.279-.906-3.92 1.684-9.448 7.257-7.33 12.376 1.96 4.74 8.024 7.215 12.051 8.096 6.042 1.322 12.48 1.244 18.616 1.451a390.8 390.8 0 0012.294.226c3.79.01 7.883.937 10.75-2.696.32-.404.597-.849.831-1.321" fill="#FFFFFE"/><path d="M251.424 380.902c-.817-1.7-2.518-3.376-4.128-4.078-1.78-.778-3.84.054-5.78-.054-.873-.05-1.793-.09-2.735-.135 2.205 1.33 3.905 3.858 3.82 5.994-.294 7.37-5.512 8.514-6.13 9.201 1.058.013 2.117.031 3.176.034 3.79.01 7.883.937 10.75-2.696.32-.404.597-.848.831-1.321 1.053-2.127 1.215-4.824.196-6.945" fill="#ABADB3"/><path d="M222.453 383.052c3.499-3.929 5.81-9.148 6.623-14.624.21-1.412.322-2.866.068-4.263-.255-1.397-.917-2.743-1.985-3.502-.89-.631-1.98-.809-3.035-.79-2.484.042-4.888 1.087-7.065 2.458-4.612 2.904-8.399 7.274-11.516 12.085-1.801 2.78-6.626 10.466-3.34 13.665.374.362.838.582 1.294.795l2.09.976c2.623 1.225 6.149.063 8.776-1.009 3.024-1.234 5.807-3.229 8.09-5.791" fill="#CBCCD0"/><path d="M262.577 390.357c3.642 1.327 8.196 1.852 10.69-1.154 1.695-2.045 1.993-5.243 1.118-7.84-.874-2.596-2.886-4.122-5.016-5.512-2.264-1.477-4.884-2.29-7.293-3.526-7.313-3.753-29.259-29.707-34.384-30.888-4.07-.936-11.253.394-11.776 5.9-.484 5.098 6.535 12.558 9.537 15.686 5.463 5.691 11.824 9.4 17.945 13.92 5.417 3.996 10.447 8.922 16.303 12.12.832.453 1.815.908 2.876 1.294" fill="#FFFFFE"/><path d="M184.208 375.639c2.962 3.117 9.069 6.581 13.024 7.255 3.766.643 7.59.019 10.52-.872 6.479-1.968 12.004-5.015 14.753-10.143 4.033-7.518 6.525-17.095 2.006-27.532-2.257-5.21-4.838-9.974-10.77-13.95-15.566-10.435-23.791-2.07-30.039 5.496-5.879 7.125-13.101 19.057-5.473 31.063 1.642 2.585 3.687 6.27 5.98 8.683" fill="#F26200"/><path d="M154.559 386.013c-4.941-3.939-8.483-10.017-9.61-19.456-1.627-13.607 1.417-28.206 9.38-38.702 7.964-10.495 21.038-16.228 32.871-13.063 7.137 1.907 13.379 6.735 18.843 12.221 7.467 7.498 14.012 16.869 15.953 27.965 4.19 23.946-11.28 39.332-31.043 38.687-12.553-.408-27.003-.165-36.394-7.652" fill="#FFFFFE"/><path d="M190.953 393.665c4.15.136 8.104-.444 11.733-1.653.316-2.795-.336-5.668-.997-8.41-.925-3.833-2.012-7.91-4.746-10.399-2.89-2.631-7.086-2.846-10.637-1.51-3.55 1.334-6.58 4.005-9.417 6.772a130.248 130.248 0 00-7.986 8.525c-1.207 1.41-2.406 2.839-3.66 4.202 8.026 2.214 17.294 2.2 25.71 2.473" fill="#C17358"/><path d="M196.953 308.376c2.768 3.589 3.771 7.7.134 11.33-5.702 5.694-30.04 9.312-32.276 9.582-2.815.337-5.78.6-6.569-3.576-.893-4.729 2.498-11.026 4.501-15.028 8.512-17.007 23.616-16.033 34.21-2.308M165.68 396.709c4.18-.835 7.287-3.315 6.524-8.692-1.197-8.429-18.016-28.368-19.597-30.15-1.991-2.245-4.14-4.531-7.118-1.85-3.372 3.035-4.312 10.305-5.025 14.82-3.036 19.178 9.226 29.058 25.216 25.872" fill="#9A7560"/><path d="M221.996 354.978a40.358 40.358 0 00-.311-1.54c-.959-1.237-2.497-2.027-3.899-1.546-.44.151-.874.453-1.05.932-.087.235-.104.492-.102.745.01 2.312 1.455 4.23 2.406 6.27 1.1 2.36 1.556 5.096 1.335 7.762-.116 1.41-1.919 5.215-.82 6.243.378.353.856.34 1.319.135 1.858-5.436 2.378-11.831 1.122-19.001" fill="#AC3C4A"/><path d="M210.22 381.206c.028-1.752.839-4.264 2.045-6.672l.004-.008.005-.01c1.167-2.433 2.624-4.544 3.928-5.509 6.213-4.593 7.692 4.253 4.886 10.942h.002l-.004.007-.005.012h-.002c-3.534 6.239-10.99 9.58-10.86 1.238" fill="#4D3422"/><path d="M189.054 376.416c1.48-1.533 4.859 3.74 2.69 8.82-2.168 5.08-8.3 7.834-8.598 5.413-.298-2.421 4.239-1.968 5.878-6.455 1.64-4.488-1.449-6.244.03-7.778M200.34 344.782c1.17-1.842 5.45 2.518 4.255 7.985-1.195 5.466-6.703 9.586-7.438 7.29-.736-2.295 3.794-2.91 4.58-7.674.784-4.764-2.565-5.759-1.397-7.6" fill="#0F0F0D"/></g><g transform="translate(309.5 20)"><rect fill="#1955DD" width="160.635" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="31.839" y="27">wakes up</tspan></text></g><g transform="translate(300.5 189)"><rect fill="#1955DD" width="180.59" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="32.587" y="28">falls asleep</tspan></text></g><path fill="#555762" d="M575 88h-20l10 14zM200 162h20l-10-14z"/></g></svg>

转换（transition）是由导致状态更改的 **事件（event）** 引起的。用事件来标记转换。

转换和事件是 **确定性** 的。 确定性意味着每个转换和事件总是指向相同的下一个状态，并且每次进程运行时总是从给定的起始条件产生相同的结果。 你永远不会把狗摇醒后，它还 **睡着** ，或打晕它 它还 **醒着** 吧。

小狗具有两个有限状态，和两个转换的过程，就是一个 *有限状态机*。 状态机用于描述某事物的行为。 状态机描述事物的状态，以及这些状态之间的转换。 它是一个有限状态机，因为它具有有限数量的状态。（缩写为 FSM）

## 初始状态 Initial State

任何具有状态的事物，都会有一个 *初始状态*，即进程存在的默认状态，直到发生事件，从而改变事物的状态。

初始状态用实心圆圈表示，箭头从圆圈指向初始状态。

<svg width="780" height="265" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><path fill="#E3E9F3" d="M0 0h780v265H0z"/><g transform="translate(323.869 19.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="28.506" y="35">waiting</tspan></text></g><path d="M425.046 247c15.663 0 19.954-2.564 19.954-5.38 0-1.764-3.988-3.32-10.087-4.262 5.733-1.162 9.08-2.56 9.08-4.066 0-4.029-23.95-7.292-53.5-7.292-29.543 0-53.493 3.263-53.493 7.292 0 3.768 17.11 7.344 47.099 7.344 2.07 0 4.202-.017 6.393-.052 2.612-.042 5.176-.027 7.688-.076 2.589 3.61 12.787 6.4 25.865 6.488.34.002.672.004 1.001.004" fill-opacity=".25" fill="#000"/><path d="M432.876 208.522c2.484 7.205 9.28 12.769 10.063 20.344.213 2.063-.102 4.287-1.423 5.895-1.784 2.171-5.056 2.695-7.751 1.866-2.697-.829-4.901-2.766-6.787-4.852-5.204-5.757-8.655-13.204-8.961-20.934-.134-3.38.501-7.118 3.114-9.289 2.232-1.854 5.972-2.042 8.494-.592 2.477 1.424 2.422 5.156 3.251 7.562" fill="#ABADB3"/><path d="M349.566 197.212c2.034 3.072-3.643 3.132-5.316 2.405-6.549-2.858-13.747-12.582-15.997-19.793-.48-1.54-.337-3.872.961-4.615 1.27-.728 2.68.585 3.612 1.796 1.999 2.597 14.062 16.164 16.74 20.207" fill="#FFFFFE"/><path d="M344.743 191.914c6.155-5.334 22.717-4.307 25.117-4.157 4.201.266 21.237-6.46 23.257-9.06 4.58-5.898 9.82-7.807 18.063-7.692 5.966.083 11.848 2.786 15.779 7.253 1.894 2.152 3.334 4.665 4.552 7.256 1.488 3.161 2.672 6.758 2.465 10.292-.172 2.941-2.285 5.595-2.1 8.528.52 8.275-3.116 16.4-11.573 22.003-10.756 7.124-23.788 4.61-35.473 2.086-5.035-1.088-6.217-2.9-11.436-2.875-4.852.026-10.576 2.55-15.417 2.175-8.585-.662-16.783 4.236-20.023-4.08-2.843-7.3 1.035-26.742 6.79-31.73" fill="#FFFFFE"/><path d="M358.838 219.417c3.416-3.094 7.245-3.273 11.617-2.97 6.536.45 12.606 4.307 19.285 3.447 6.598-.852 13.216-3.017 19.38-5.396 0 0 8.011 4.641 20.88-.498-1.709 4.783-4.011 10.608-9.164 14.041-7 4.666-17.074 3.746-25.222 4.416-9.278.763-18.622.723-27.892-.126-3.153-.288-8.678-.668-10.823-3.452-2.042-2.653-.264-7.466 1.94-9.462" fill="#ABADB3"/><path d="M394.555 167.255c-2.292 1.734-4.468 5.748-4.527 8.581-.056 2.697-.948 12.895 13.874 19.81 15.69 7.32 30.854 4.015 33.495.206 6.928-9.995-1.358-17.332-8.696-23.085-6.909-5.414-18.133-12.536-27.461-8.659-2.008.835-4.91 1.805-6.685 3.147" fill="#F26200"/><path d="M452.548 128.752c1.303 4.42-.248 8.152-4.152 9.097-6.12 1.483-28.068-8.439-29.953-9.444-2.37-1.268-4.844-2.679-4.388-6.49.518-4.313 7.285-8.592 10.21-10.28 16.083-9.281 23.296.214 28.283 17.117" fill="#9A7560"/><path d="M470.326 160.603c-1.4-5.65-10.748-6.882-15.216-10.152-4.693-3.435-5.457-8.302-8.39-13.162-2.509-4.154-5.14-9.747-9.126-12.673-7.96-5.837-15.91-5.174-24.786-3.233-11.876 2.595-21.474 5.791-28.711 15.846-4.286 5.955-5.573 23.197 5.813 37.058 5.514 6.714 25.902 24.541 52.664 18.473 8.227-1.865 15.45-3.82 23.113-11.3 4.53-4.42 6.445-13.57 4.639-20.857" fill="#FFFFFE"/><path d="M445.916 157.599c1.463-2.653 1.258-5.748.481-8.64-2.132-7.943-12.731-19.62-22.195-22.785-8.694-2.825-16.986.388-26.214 0-2.749-.117-5.27 3.721-8.081 3.748-2.41 2.25-5.677 3.514-7.71 9.468-2.085 6.113-2.148 7.73-2.196 12.108-.062 5.59 3.97 21.511 19.894 32.016 1.209.648.165.648 1.75 0 7.967-3.256 22.557-8.717 31.599-11.98 9.59-3.396 10.126-9.318 12.672-13.935z" fill="#C17358"/><path d="M427.844 150.649c1.536 4.323 4.64 7.089 6.936 6.177 2.295-.91 2.91-5.152 1.376-9.474-1.536-4.323-4.64-7.09-6.936-6.178-2.295.91-2.91 5.153-1.376 9.475" fill="#0F0F0D"/><path d="M365.356 112.5c-3.006 3.367-3.239 9.545-.1 12.911 1.258 1.351 2.879 2.317 4.54 3.132a35.03 35.03 0 004.947 1.976c2.15.675 4.367 1.142 6.485 1.913 4.55 1.655 8.55 4.672 13.226 5.938 5.51 1.492 11.692.29 16.226-3.156 1.29-.98 1.797-2.247 2.17-3.774 1.181-4.864-4.907-13.928-7.603-17.675-14.831-20.614-27.123-15.57-39.891-1.265" fill="#9A7560"/><path d="M458.726 158.092c1.065-1.23 3.123-2.238 5.39-2.782l.008-.002.01-.002c2.253-.601 3.296-.25 4.719.483 4.835 2.494 4.02 10.026-1.903 12.075v.001l-.007.002-.01.003-.001-.002c-6.155 1.01-13.277-3.912-8.206-9.776" fill="#4D3422"/><path d="M456.817 178.975c-.574-.216-1.01-.906-.73-1.45.192-.373.629-.541 1.028-.677.82-.28 6.857-1.531 7.138-3.228.171-1.028.148-2.127.22-3.165l.38-5.46a1.071 1.071 0 011.146-.992c.592.04 1.039.551.998 1.14l-.417 6.001c-.114 1.643.348 4.147-.945 5.453-1.34 1.354-8.244 2.595-8.818 2.378" fill="#4D3422"/><path d="M396.518 231.032c-4.92-7.195-6.422-28.81 7.272-25.734 6.914 1.553 6.948 8.154 8.665 13.96.335 1.134.676 2.281 1.28 3.295 1.106 1.854 2.978 3.085 4.785 4.253 2.61 1.684 5.282 3.396 8.293 4.13 2.778.677 5.68.482 8.539.518 2.858.038 5.837.353 8.25 1.897 2.412 1.546 4.057 4.634 3.14 7.362-.887 2.643-3.823 4.087-6.587 4.262-2.765.175-5.486-.62-8.225-1.035-4.044-.615-8.167-.404-12.236-.816-8.805-.89-18.155-4.751-23.176-12.092" fill="#FFFFFE"/><path d="M419.706 229.26c-.902 1.93-1.022 4.352.123 6.139 1.481 2.309 4.584 2.92 7.234 2.457 2.651-.464 5.093-1.758 7.693-2.461.904-.244 5.389-2.777 6.547-3.148 2.978-.954-4.439-4.295-6.234-5.736-4.817-3.865-12.44-3.507-15.363 2.75" fill="#ABADB3"/><path d="M420.736 227.26c-.94 1.93-1.066 4.352.129 6.14 1.543 2.309 4.778 2.919 7.54 2.456 2.764-.463 5.31-1.758 8.02-2.46.942-.244 1.954-.442 2.67-1.094 2.378-2.165-.472-6.35-2.344-7.791-5.02-3.865-12.968-3.507-16.015 2.75M376.097 206.661c1.36 4.805.644 10.459-2.13 14.32-1.555 2.166-3.639 3.693-5.408 5.614.103-.111 3.974-.343 5.836.934 1.733 1.188 3.257 2.904 3.547 4.99.83 5.974-7.446 6.68-10.552 6.442-15.607-1.19-15.16-7.204-14.483-7.36-4.103.945-7.914 2.235-11.405-1.61-3.114-3.427-4.06-9.003-3.199-13.927 1.326-7.58 5.923-14.173 11.823-17.37 1.91-1.034 3.991-1.992 6.066-2.44 3.738-.808 7.666-2.184 11.376-.33 3.885 1.941 7.188 6.003 8.529 10.737" fill="#FFFFFE"/><path d="M375.694 217.599s8.972-20.1-12.694-21.555c0 0 21.297-2.114 14.75 22.956l-2.056-1.401" fill="#ABADB3"/><path d="M394.234 138.382c-4.63-1.246-8.592-4.215-13.1-5.843-2.097-.759-4.292-1.218-6.423-1.883a34.83 34.83 0 01-4.899-1.944 23.698 23.698 0 01-1.812-.988c.098-.304.206-.605.341-.897 1.064-2.303 3.207-3.976 5.527-5.055 3.666-1.705 7.875-2.106 11.885-1.516 4.007.588 7.828 2.128 11.336 4.13a44.918 44.918 0 0110.754 8.575c.695.755 1.45 1.61 2.157 2.532-4.462 3.219-10.43 4.324-15.766 2.889" fill="#9A7560"/><g transform="translate(284 15)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g></g></svg>

用状态图来描述遛狗的过程，初始状态会是 **等待（waiting）** 走路。

## 最终状态 Final State

大多数具有状态的进程都会有一个 *最终状态*，即进程完成时的最后一个状态。 最终状态由状态圆角矩形框上的双边框表示。

在遛狗状态图中，最终状态是 **溜狗完成（walk complete）**。

<svg width="780" height="600" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><path fill="#E3E9F3" d="M0 0h780v600H0z"/><g transform="translate(59.869 19.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="28.506" y="35">waiting</tspan></text></g><g transform="translate(513.19 489.667)"><rect stroke="#555762" stroke-width="7" fill="#555762" x="-3.292" y="-3.167" width="246.792" height="57" rx="15"/><rect stroke="#FFF" stroke-width="3" x="-1.292" y="-1.167" width="242.792" height="53" rx="15"/></g><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(513.19 489.667)"><tspan x="24.887" y="35">walk complete</tspan></text><g transform="translate(300.19 254.667)"><rect fill="#555762" x=".156" y=".333" width="179.844" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="29.18" y="35">on a walk</tspan></text></g><g transform="translate(20 15)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><path d="M211.5 45l84.5-.167h74.5c13.333.386 20 7.053 20 20v189.834" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M400 243h-20l10 14z"/><path d="M480 281l58-.167h74.5c13.333.386 20 7.053 20 20v182.834" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M643 473h-20l10 14z"/><path d="M408.907 522.827c1.552 1.197 4.985 5.203 5.09 8.018.146 3.969-3.924 3.363-5.725 2.582-7.053-3.068-14.464-13.729-16.888-21.47-.518-1.654-.703-3.934.695-4.733 1.368-.781 2.887.629 3.889 1.928 2.153 2.788 4.126 5.733 6.242 8.552 2.1 2.798 4.029 3.065 6.697 5.123" fill="#CBCCD0"/><path d="M430.003 580C402.385 580 380 573.286 380 565.001c0-8.288 22.385-15.001 50.003-15.001 27.612 0 49.997 6.713 49.997 15.001 0 8.285-22.385 14.999-49.997 14.999z" fill-opacity=".25" fill="#000"/><path d="M401.557 565.627c4.467-1.053 9.733-2.461 12.966-7.275 3.117-4.644 3.39-13.427.26-18.851-6.737-11.665-19.415-20.344-26.205-6.08-3.17 6.661 1.694 16.173 5.067 21.117-1.846.95-4.043.031-5.581 2.203-1.344 1.898-1.48 5.292-.031 7.26 3.585 4.866 9.503 2.57 13.524 1.626M460.141 563.877c-4.607-.902-10.035-2.134-13.433-6.949-3.277-4.648-3.709-13.659-.584-19.364 6.72-12.26 19.588-21.693 26.797-7.313 3.37 6.72-1.464 16.69-4.845 21.911 1.914.899 4.152-.13 5.766 2.04 1.415 1.895 1.61 5.373.156 7.452-3.602 5.15-9.714 3.032-13.857 2.223" fill="#CBCCD0"/><path d="M451.197 508.326c-4.788-10.453-18.307-10.463-25.723-7.94-5.913 2.011-11.47 4.554-14.752 12.495-1.897 4.596-2.195 9.208-1.05 14.246.611 2.696 1.604 5.16 2.291 7.805.571 2.2.337 3.322.527 5.48.568 6.58 3.228 14.507 6.325 19.22.79 1.205 2.703 1.792 3.64 2.874 5.277.49 15.72.657 21.077.31 2.903-3.342 5.035-8.45 6.98-12.804 5.024-11.243 6.6-28.777.685-41.686" fill="#ABADB3"/><path d="M444.667 516.554S451.554 537 441 562.451L456.245 566s12.603-31.506-3.227-58l-8.351 8.554" fill="#FFFFFE"/><path d="M452.515 519.908c1.6-2.536 2.092-6.05.55-8.654-.728-1.233-1.834-2.163-2.974-2.98-8.71-6.254-41.761-7.897-37.756 10.972 3.616 17.038 33.546 11.18 40.18.662M438.12 564.843c-.867 4.373 3.079 8.432 8.812 9.072 5.73.638 11.08-2.386 11.949-6.76.865-4.367-3.078-8.43-8.81-9.07-5.732-.638-11.084 2.386-11.952 6.758" fill="#FFFFFE"/><path d="M417.333 516.554S410.445 537 421 562.451L405.756 566s-12.604-31.506 3.225-58l8.352 8.554" fill="#FFFFFE"/><path d="M423.88 564.843c.867 4.373-3.078 8.432-8.812 9.072-5.73.638-11.08-2.386-11.95-6.76-.863-4.367 3.079-8.43 8.81-9.07 5.734-.638 11.085 2.386 11.953 6.758" fill="#FFFFFE"/><path d="M492.77 492.213c-.537 4.67-2.946 8.255-8.814 7.737-9.204-.812-32.188-18.199-34.25-19.838-2.594-2.065-5.254-4.302-2.618-7.757 2.986-3.91 10.752-5.388 15.561-6.45 20.44-4.517 32.17 8.44 30.12 26.308" fill="#9A7560"/><path d="M448 478.883a11.266 11.266 0 011.8-2.937c2.37-2.78 5.993-4.32 9.647-4.777 3.654-.457 7.364.076 10.96.866 5.974 1.313 11.913 3.41 16.653 7.231 2.35 1.893 4.409 4.471 5.894 7.34a33.544 33.544 0 01-.178 5.61c-.54 4.669-2.96 8.252-8.86 7.734-9.25-.812-32.353-18.194-34.426-19.833a31.567 31.567 0 01-1.49-1.234M367.23 492.213c.536 4.67 2.945 8.255 8.814 7.737 9.203-.812 32.188-18.199 34.25-19.838 2.594-2.065 5.254-4.302 2.618-7.757-2.986-3.91-10.752-5.388-15.562-6.45-20.439-4.517-32.169 8.44-30.12 26.308" fill="#9A7560"/><path d="M412 478.883a11.287 11.287 0 00-1.8-2.937c-2.37-2.78-5.993-4.32-9.648-4.777-3.654-.457-7.363.076-10.958.866-5.975 1.313-11.915 3.41-16.654 7.231-2.35 1.893-4.409 4.471-5.895 7.34a33.462 33.462 0 00.18 5.61c.538 4.669 2.96 8.252 8.859 7.734 9.25-.812 32.353-18.194 34.426-19.833.508-.402 1.017-.81 1.49-1.234" fill="#9A7560"/><path d="M455 507c0 6.627-10.968 12-24.5 12-13.53 0-24.5-5.373-24.5-12s10.97-12 24.5-12c13.532 0 24.5 5.373 24.5 12" fill="#F26200"/><path d="M467.154 464.003c-7.256-22.112-25.092-23.358-36.594-22.945l-.06.003-.06-.003c-11.502-.413-29.338.833-36.594 22.945-11.136 33.938 12.419 45.83 35.777 45.997.29 0 .583 0 .877-.003.294.003.588.004.877.003 23.358-.167 46.913-12.06 35.777-45.997" fill="#FFFFFE"/><path d="M444.572 461c-2.867.806-5.399 2.548-8.264 3.363-2.105.6-4.337.465-6.166-.548v-.153l-.142.076-.143-.076v.153c-1.828 1.013-4.06 1.147-6.166.548-2.864-.815-5.396-2.557-8.264-3.363a78.847 78.847 0 00-.09 15.473c.27 2.925.802 6.04 2.841 8.16 3.045 3.163 7.775 4.387 11.802 4.367 4.031-.02 8.783-1.189 11.841-4.367 2.04-2.12 2.572-5.235 2.842-8.16a78.786 78.786 0 00-.09-15.473" fill="#AC3C4A"/><path d="M420.515 435.03c2.224-1.373 6.01-2.07 9.97-2.028h.032c3.96-.043 7.744.655 9.967 2.029 10.587 6.555.614 16.182-9.967 16.966V452h-.032v-.003c-10.581-.784-20.556-10.411-9.97-16.966" fill="#4D3422"/><path d="M430.5 462c.83 0 1.5-.499 1.5-1.114v-9.772c0-.615-.67-1.114-1.5-1.114s-1.5.499-1.5 1.114v9.772c0 .615.67 1.114 1.5 1.114" fill="#0F0F0D"/><path d="M413.674 457.224c.653-.448 1.504-.204 1.895.548 1.112 2.128 4.98 4.404 6.949 4.842 2.848.632 5.038-.188 7.375-1.647v-.128l.108.064.106-.064v.128c2.336 1.46 4.527 2.279 7.375 1.647 1.969-.438 5.838-2.714 6.949-4.842.39-.752 1.242-.996 1.895-.548.656.45.87 1.42.479 2.17-1.718 3.292-6.564 5.83-8.794 6.326-.865.194-1.68.28-2.452.28-2.129 0-3.924-.67-5.558-1.555-1.636.884-3.431 1.555-5.558 1.555-.774 0-1.59-.086-2.453-.28-2.23-.495-7.077-3.034-8.794-6.326-.391-.75-.179-1.72.478-2.17" fill="#4D3422"/><g><path d="M161.046 237c15.663 0 19.954-2.564 19.954-5.38 0-1.764-3.988-3.32-10.087-4.262 5.733-1.162 9.08-2.56 9.08-4.066 0-4.029-23.95-7.292-53.5-7.292C96.95 216 73 219.263 73 223.292c0 3.768 17.11 7.344 47.099 7.344 2.07 0 4.202-.017 6.393-.052 2.612-.042 5.176-.027 7.688-.076 2.589 3.61 12.787 6.4 25.865 6.488.34.002.672.004 1.001.004" fill-opacity=".25" fill="#000"/><path d="M168.876 198.522c2.484 7.205 9.28 12.769 10.063 20.344.213 2.063-.102 4.287-1.423 5.895-1.784 2.171-5.056 2.695-7.751 1.866-2.697-.829-4.901-2.766-6.787-4.852-5.204-5.757-8.655-13.204-8.961-20.934-.134-3.38.501-7.118 3.114-9.289 2.232-1.854 5.972-2.042 8.494-.592 2.477 1.424 2.422 5.156 3.251 7.562" fill="#ABADB3"/><path d="M85.566 187.212c2.034 3.072-3.643 3.132-5.316 2.405-6.549-2.858-13.747-12.582-15.997-19.793-.48-1.54-.337-3.872.961-4.615 1.27-.728 2.68.585 3.612 1.796 1.999 2.597 14.062 16.164 16.74 20.207" fill="#FFFFFE"/><path d="M80.743 181.914c6.155-5.334 22.717-4.307 25.117-4.157 4.201.266 21.237-6.46 23.257-9.06 4.58-5.898 9.82-7.807 18.063-7.692 5.966.083 11.848 2.786 15.779 7.253 1.894 2.152 3.334 4.665 4.552 7.256 1.488 3.161 2.672 6.758 2.465 10.292-.172 2.941-2.285 5.595-2.1 8.528.52 8.275-3.116 16.4-11.573 22.003-10.756 7.124-23.788 4.61-35.473 2.086-5.035-1.088-6.217-2.9-11.436-2.875-4.852.026-10.576 2.55-15.417 2.175-8.585-.662-16.783 4.236-20.023-4.08-2.843-7.3 1.035-26.742 6.79-31.73" fill="#FFFFFE"/><path d="M94.838 209.417c3.416-3.094 7.245-3.273 11.617-2.97 6.536.45 12.606 4.307 19.285 3.447 6.598-.852 13.216-3.017 19.38-5.396 0 0 8.011 4.641 20.88-.498-1.709 4.783-4.011 10.608-9.164 14.041-7 4.666-17.074 3.746-25.222 4.416-9.278.763-18.622.723-27.892-.126-3.153-.288-8.678-.668-10.823-3.452-2.042-2.653-.264-7.466 1.94-9.462" fill="#ABADB3"/><path d="M130.555 157.255c-2.292 1.734-4.468 5.748-4.527 8.581-.056 2.697-.948 12.895 13.874 19.81 15.69 7.32 30.854 4.015 33.495.206 6.928-9.995-1.358-17.332-8.696-23.085-6.909-5.414-18.133-12.536-27.461-8.659-2.008.835-4.91 1.805-6.685 3.147" fill="#F26200"/><path d="M188.548 118.752c1.303 4.42-.248 8.152-4.152 9.097-6.12 1.483-28.068-8.439-29.953-9.444-2.37-1.268-4.844-2.679-4.388-6.49.518-4.313 7.285-8.592 10.21-10.28 16.083-9.281 23.296.214 28.283 17.117" fill="#9A7560"/><path d="M206.326 150.603c-1.4-5.65-10.748-6.882-15.216-10.152-4.693-3.435-5.457-8.302-8.39-13.162-2.509-4.154-5.14-9.747-9.126-12.673-7.96-5.837-15.91-5.174-24.786-3.233-11.876 2.595-21.474 5.791-28.711 15.846-4.286 5.955-5.573 23.197 5.813 37.058 5.514 6.714 25.902 24.541 52.664 18.473 8.227-1.865 15.45-3.82 23.113-11.3 4.53-4.42 6.445-13.57 4.639-20.857" fill="#FFFFFE"/><path d="M181.916 147.599c1.463-2.653 1.258-5.748.481-8.64-2.132-7.943-12.731-19.62-22.195-22.785-8.694-2.825-16.986.388-26.214 0-2.749-.117-5.27 3.721-8.081 3.748-2.41 2.25-5.677 3.514-7.71 9.468-2.085 6.113-2.148 7.73-2.196 12.108-.062 5.59 3.97 21.511 19.894 32.016 1.209.648.165.648 1.75 0 7.967-3.256 22.557-8.717 31.599-11.98 9.59-3.396 10.126-9.318 12.672-13.935z" fill="#C17358"/><path d="M163.844 140.649c1.536 4.323 4.64 7.089 6.936 6.177 2.295-.91 2.91-5.152 1.376-9.474-1.536-4.323-4.64-7.09-6.936-6.178-2.295.91-2.91 5.153-1.376 9.475" fill="#0F0F0D"/><path d="M101.356 102.5c-3.006 3.367-3.239 9.545-.1 12.911 1.258 1.351 2.879 2.317 4.54 3.132a35.03 35.03 0 004.947 1.976c2.15.675 4.367 1.142 6.485 1.913 4.55 1.655 8.55 4.672 13.226 5.938 5.51 1.492 11.692.29 16.226-3.156 1.29-.98 1.797-2.247 2.17-3.774 1.181-4.864-4.907-13.928-7.603-17.675-14.831-20.614-27.123-15.57-39.891-1.265" fill="#9A7560"/><path d="M194.726 148.092c1.065-1.23 3.123-2.238 5.39-2.782l.008-.002.01-.002c2.253-.601 3.296-.25 4.719.483 4.835 2.494 4.02 10.026-1.903 12.075v.001l-.007.002-.01.003-.001-.002c-6.155 1.01-13.277-3.912-8.206-9.776" fill="#4D3422"/><path d="M192.817 168.975c-.574-.216-1.01-.906-.73-1.45.192-.373.629-.541 1.028-.677.82-.28 6.857-1.531 7.138-3.228.171-1.028.148-2.127.22-3.165l.38-5.46a1.071 1.071 0 011.146-.992c.592.04 1.039.551.998 1.14l-.417 6.001c-.114 1.643.348 4.147-.945 5.453-1.34 1.354-8.244 2.595-8.818 2.378" fill="#4D3422"/><path d="M132.518 221.032c-4.92-7.195-6.422-28.81 7.272-25.734 6.914 1.553 6.948 8.154 8.665 13.96.335 1.134.676 2.281 1.28 3.295 1.106 1.854 2.978 3.085 4.785 4.253 2.61 1.684 5.282 3.396 8.293 4.13 2.778.677 5.68.482 8.539.518 2.858.038 5.837.353 8.25 1.897 2.412 1.546 4.057 4.634 3.14 7.362-.887 2.643-3.823 4.087-6.587 4.262-2.765.175-5.486-.62-8.225-1.035-4.044-.615-8.167-.404-12.236-.816-8.805-.89-18.155-4.751-23.176-12.092" fill="#FFFFFE"/><path d="M155.706 219.26c-.902 1.93-1.022 4.352.123 6.139 1.481 2.309 4.584 2.92 7.234 2.457 2.651-.464 5.093-1.758 7.693-2.461.904-.244 5.389-2.777 6.547-3.148 2.978-.954-4.439-4.295-6.234-5.736-4.817-3.865-12.44-3.507-15.363 2.75" fill="#CBCCD0"/><path d="M156.736 217.26c-.94 1.93-1.066 4.352.129 6.14 1.543 2.309 4.778 2.919 7.54 2.456 2.764-.463 5.31-1.758 8.02-2.46.942-.244 1.954-.442 2.67-1.094 2.378-2.165-.472-6.35-2.344-7.791-5.02-3.865-12.968-3.507-16.015 2.75M112.097 196.661c1.36 4.805.644 10.459-2.13 14.32-1.555 2.166-3.639 3.693-5.408 5.614.103-.111 3.974-.343 5.836.934 1.733 1.188 3.257 2.904 3.547 4.99.83 5.974-7.446 6.68-10.552 6.442-15.607-1.19-15.16-7.204-14.483-7.36-4.103.945-7.914 2.235-11.405-1.61-3.114-3.427-4.06-9.003-3.199-13.927 1.326-7.58 5.923-14.173 11.823-17.37 1.91-1.034 3.991-1.992 6.066-2.44 3.738-.808 7.666-2.184 11.376-.33 3.885 1.941 7.188 6.003 8.529 10.737" fill="#FFFFFE"/><path d="M111.694 207.599s8.972-20.1-12.694-21.555c0 0 21.297-2.114 14.75 22.956l-2.056-1.401" fill="#ABADB3"/></g><g><path d="M598.806 236c-.569 0-1.142-.004-1.726-.012-36.864-.512-66.08-14.938-66.08-19.88 0-4.944 8.996-6.215 36.75-6.215 27.748 0 53.117 10.267 57.735 12.618 9.524 4.847-.235 13.489-26.679 13.489" fill-opacity=".25" fill="#000"/><path d="M558.843 160.723c3.503 2.453-4.335 3.51-6.324 2.695-7.792-3.204-15.979-14.333-18.656-22.414-.572-1.727-.777-4.108.767-4.941 1.51-.816 3.297.583 4.297 2.012 6.263 8.949 12.87 17.713 19.916 22.648" fill="#CBCCD0"/><path d="M571.527 205.216c1.902 4.475 4.66 10.641 9.202 12.999 2.79 1.448 6.171.821 8.295-1.157.603-.56 1.128-1.237 1.37-2.055.24-.818.165-1.796-.343-2.555-.685-1.023-1.965-1.44-2.77-2.372-1.772-2.05-1.263-7.14-1.132-9.528.2-3.636.823-7.19 1.398-10.74.378-2.33.73-4.686.612-7.096-.267-5.396-2.924-10.692-6.502-14.972-4.277-5.114-14.554-10.735-18.821-3.723-1.867 3.068-.492 7.425.216 10.887.979 4.793 1.984 9.586 3.207 14.343 1.39 5.407 3.06 10.777 5.268 15.969" fill="#ABADB3"/><path d="M618.593 172.832a11.598 11.598 0 00-1.557 3.57c-.756 3.054-.563 6.19-.84 9.297-.74 8.33-4.775 14.008-5.488 14.66-2.87 2.626-4.754-2.354-8.073-.633-4.274 2.216-3.022 12.714 7.37 13.309 7.683.442 14.631-10.444 17.276-17.2 2.506-6.4 3.814-16.125 2.262-22.543-.695-2.88-3.087-4.532-6.522-3.773-1.856.411-3.357 1.698-4.428 3.313" fill="#FFFFFE"/><path d="M627.669 180.91c2.079-3.826 2.629-9.188.462-13.226-1.026-1.91-2.552-3.371-4.117-4.66-5.937-4.89-13.71-6.08-21.127-6.79-7.526-.721-16.02-2.124-23.52-3.202-13.155-1.893-25.717 2.684-27.213 5.308-2.29 4.016 1.785 10.304 1.351 14.794-.545 5.648-1.347 12.638 5.364 14.75 2.753.866 5.708.73 8.57 1.115 2.792.377 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.236 12-.992 16.055-5.829 20.444-13.908M601.277 198.333c-2.053.777-3.556 2.715-4.042 4.85-.13.575-.195 1.17-.116 1.754.164 1.207.956 2.287 2 2.92 1.045.632 2.317.84 3.531.705 2.046-.23 3.978-1.47 4.932-3.289.87-1.657 1.04-4.403-.45-5.773-1.54-1.416-3.898-1.905-5.855-1.167" fill="#FFFFFE"/><path d="M585.178 189.338c-5.04-1.131-9.96-2.772-15.032-3.746-4.9-.94-10.248-1.098-15.22-.388.87 1.167 2.123 2.107 3.943 2.68 2.753.866 5.708.73 8.57 1.115 2.792.378 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.237 7.725-.64 12.155-2.874 15.505-6.54a76.674 76.674 0 01-37.552 1.058" fill="#CBCCD0"/><path d="M591.052 176.562s.924 18.39 11.97 48.093l-12.766 4.105s-16.605-34.1-16.878-61.326l17.674 9.128" fill="#FFFFFE"/><path d="M609.464 225.467c1.94 5.617-3.182 7.6-8.604 8.47-6.99 1.123-9.279-.693-10.686-4.127-1.401-3.428 1.775-7.183 7.102-8.383 5.327-1.2 10.987.556 12.188 4.04M532.284 211.942c.859 1.847 2.204 3.595 6.766 3.27 4.028-.29 4.5-2.478 3.717-4.238-.368-.827-.897-.848-.978-2.282-.457-8.084-.467-9.982 3.737-13.676 1.21-1.063 3.595-.176 5.15-.146 4.622.089 9.066-2.867 11.744-6.816 3-4.423 4.832-9.917 5.5-15.271.569-4.555-.04-10.186-2.438-13.726-2.607-3.85-8.648-3.67-12.377-1.76-3.342 1.715-6.256 4.597-8.724 7.844-13.378 17.6-12.906 45.064-12.097 46.801" fill="#FFFFFE"/><path d="M584.833 152.844c-1.163 3.165-1.239 8.742-.055 11.85 1.126 2.958 3.272 5.552 5.239 7.405 4.348 4.102 9.773 5.96 14.988 6.321 7.644.53 15.597.47 21.832-6.189 3.11-3.323 5.732-6.742 6.285-12.354 1.451-14.73-8.676-18.05-17.317-20.183-8.137-2.005-20.627-3.446-26.746 5.989-1.317 2.03-3.324 4.71-4.226 7.16" fill="#F26200"/><path d="M575.692 114.243c1.549-12.2 17.777-17.841 28.265-20.268 1.886-.436 4.147-.712 6.624-.832 2.467-.243 4.743-.3 6.675-.144 10.729.87 27.606 4.083 30.918 15.926 2.644 9.45-.957 19.755-4.2 29.641-1.48 4.514-3.041 9.074-3.156 13.347-.344 12.693-11.272 21.047-23.1 21.155-11.827.11-24.366-6.143-28.071-17.622-1.312-4.07-3.35-8.242-5.473-12.493-4.651-9.306-9.716-18.976-8.482-28.71" fill="#FFFFFE"/><path d="M589.093 153.834c-1.297-3.557-3.075-7.189-4.92-10.88-4.65-9.307-9.715-18.977-8.48-28.711.631-4.98 3.71-8.865 7.843-11.886 7.256 5.853 17.846 5.088 24.834 11.928 8.217 8.045 5.428 21.632-2.94 28.233-2.785 2.199-6.31 2.74-9.257 4.627-2.606 1.67-4.766 4.49-7.08 6.689" fill="#C17358"/><path d="M590.01 128.508c.339 4.61 2.724 8.191 5.329 8 2.605-.192 4.443-4.082 4.104-8.692-.338-4.608-2.723-8.19-5.329-7.999-2.605.191-4.441 4.083-4.104 8.691M626.66 125.82c.338 4.608 2.724 8.19 5.328 8 2.606-.192 4.444-4.084 4.105-8.693-.338-4.608-2.724-8.19-5.33-8-2.604.192-4.442 4.084-4.104 8.692" fill="#0F0F0D"/><path d="M664.16 108.271c-.136 4.429-1.948 7.952-7 7.833-7.922-.187-28.77-15.105-30.646-16.518-2.36-1.78-4.787-3.719-2.773-7.135 2.283-3.867 8.819-5.745 12.856-7.046 17.16-5.531 28.08 5.925 27.563 22.866M559.783 115.93c.783 4.36 3.089 7.582 8.07 6.727 7.81-1.342 26.257-19.143 27.906-20.815 2.075-2.105 4.19-4.377 1.7-7.462-2.82-3.493-9.56-4.396-13.748-5.094-17.782-2.968-26.914 9.96-23.928 26.644" fill="#9A7560"/><path d="M621.933 163.125c-.313.122-.592.51-.871.653-.967.496-2.255.635-3.324.661a10.11 10.11 0 01-3.353-.48c-.426-.139-2.63-.861-2.682-1.37.286 2.72 2.297 5.108 4.828 6.147 2.53 1.04 5.479.819 7.98-.29 2.501-1.109 4.576-3.045 6.157-5.278-.698.984-3.74 1.11-4.805 1.071-.734-.026-1.65-.085-2.338-.361-.427-.172-.944-.798-1.413-.791l-.179.038" fill="#AC3C4A"/><path d="M615.894 146.27c1.385-1.026 3.827-1.673 6.418-1.834l.01-.001h.012c2.587-.22 5.095.065 6.617.877 7.243 3.871 1.194 10.782-5.687 11.814v.002h-.008l-.011.002v-.002c-6.958-.016-13.953-5.97-7.351-10.859" fill="#4D3422"/><path d="M622.728 164.332c.517.063.99-.332 1.057-.883l1.069-8.744c.067-.55-.297-1.049-.814-1.112-.518-.063-.99.332-1.059.883l-1.068 8.745c-.067.55.297 1.048.815 1.111" fill="#4D3422"/><path d="M611.052 160.99c.423-.317 1.014-.205 1.315.252.855 1.291 3.592 2.54 4.95 2.719 1.967.259 3.419-.37 4.94-1.41l-.006-.082.077.035.069-.045.005.081c1.657.808 3.185 1.217 5.092.675 1.319-.376 3.844-2.01 4.501-3.414.232-.495.798-.692 1.264-.441.467.251.657.855.426 1.35-1.015 2.17-4.193 4.02-5.687 4.445-.58.166-1.13.262-1.654.3-1.447.107-2.7-.229-3.852-.707-1.07.642-2.26 1.156-3.708 1.262a8.128 8.128 0 01-1.681-.055c-1.54-.202-4.954-1.568-6.274-3.568-.301-.455-.202-1.081.223-1.398" fill="#4D3422"/></g><g transform="translate(302.5 140)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="26.971" y="28">leave home</tspan></text></g><g transform="translate(544.5 380)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="25.627" y="28">arrive home</tspan></text></g></g></svg>

## 复合状态 Compound States

复合状态是可以包含更多状态的状态，也称为子状态。 这些子状态只能在父级复合状态发生时发生。在遛狗（on a walk）状态中，可以有 **走路中（walking）**、 **奔跑中（running）** 和 **停下来闻闻好闻的气味（stopping to sniff good smells）** 几个子状态。

复合状态由标记的圆角矩形框表示，该框充当其子状态的容器。

<svg width="780" height="920" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v920H0z"/><g transform="translate(59.869 19.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="28.506" y="35">waiting</tspan></text></g><g><g transform="translate(520.19 845.667)"><rect stroke="#555762" stroke-width="7" fill="#555762" x="-3.292" y="-3.167" width="246.792" height="57" rx="15"/><rect stroke="#FFF" stroke-width="3" x="-1.292" y="-1.167" width="242.792" height="53" rx="15"/></g><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(520.19 845.667)"><tspan x="24.887" y="35">walk complete</tspan></text></g><g transform="translate(20 15)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><path d="M211.5 45l84.5-.167h74.5c13.333.386 20 7.053 20 20v189.834" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M400 243h-20l10 14z"/><path stroke="#555762" stroke-width="3" d="M640 670l-.5 169.667"/><path fill="#555762" d="M650 829h-20l10 14z"/><g><path d="M381.907 846.827c1.552 1.197 4.985 5.203 5.09 8.018.146 3.969-3.924 3.363-5.725 2.582-7.053-3.068-14.464-13.729-16.888-21.47-.518-1.654-.703-3.934.695-4.733 1.368-.781 2.887.629 3.889 1.928 2.153 2.788 4.126 5.733 6.242 8.552 2.1 2.798 4.029 3.065 6.697 5.123" fill="#CBCCD0"/><path d="M403.003 904C375.385 904 353 897.286 353 889.001c0-8.288 22.385-15.001 50.003-15.001 27.612 0 49.997 6.713 49.997 15.001 0 8.285-22.385 14.999-49.997 14.999z" fill-opacity=".25" fill="#000"/><path d="M374.557 889.627c4.467-1.053 9.733-2.461 12.966-7.275 3.117-4.644 3.39-13.427.26-18.851-6.737-11.665-19.415-20.344-26.205-6.08-3.17 6.661 1.694 16.173 5.067 21.117-1.846.95-4.043.031-5.581 2.203-1.344 1.898-1.48 5.292-.031 7.26 3.585 4.866 9.503 2.57 13.524 1.626M433.141 887.877c-4.607-.902-10.035-2.134-13.433-6.949-3.277-4.648-3.709-13.659-.584-19.364 6.72-12.26 19.588-21.693 26.797-7.313 3.37 6.72-1.464 16.69-4.845 21.911 1.914.899 4.152-.13 5.766 2.04 1.415 1.895 1.61 5.373.156 7.452-3.602 5.15-9.714 3.032-13.857 2.223" fill="#CBCCD0"/><path d="M424.197 832.326c-4.788-10.453-18.307-10.463-25.723-7.94-5.913 2.011-11.47 4.554-14.752 12.495-1.897 4.596-2.195 9.208-1.05 14.246.611 2.696 1.604 5.16 2.291 7.805.571 2.2.337 3.322.527 5.48.568 6.58 3.228 14.507 6.325 19.22.79 1.205 2.703 1.792 3.64 2.874 5.277.49 15.72.657 21.077.31 2.903-3.342 5.035-8.45 6.98-12.804 5.024-11.243 6.6-28.777.685-41.686" fill="#ABADB3"/><path d="M417.667 840.554S424.554 861 414 886.451L429.245 890s12.603-31.506-3.227-58l-8.351 8.554" fill="#FFFFFE"/><path d="M425.515 843.908c1.6-2.536 2.092-6.05.55-8.654-.728-1.233-1.834-2.163-2.974-2.98-8.71-6.254-41.761-7.897-37.756 10.972 3.616 17.038 33.546 11.18 40.18.662M411.12 888.843c-.867 4.373 3.079 8.432 8.812 9.072 5.73.638 11.08-2.386 11.949-6.76.865-4.367-3.078-8.43-8.81-9.07-5.732-.638-11.084 2.386-11.952 6.758" fill="#FFFFFE"/><path d="M390.333 840.554S383.445 861 394 886.451L378.756 890s-12.604-31.506 3.225-58l8.352 8.554" fill="#FFFFFE"/><path d="M396.88 888.843c.867 4.373-3.078 8.432-8.812 9.072-5.73.638-11.08-2.386-11.95-6.76-.863-4.367 3.079-8.43 8.81-9.07 5.734-.638 11.085 2.386 11.953 6.758" fill="#FFFFFE"/><path d="M465.77 816.213c-.537 4.67-2.946 8.255-8.814 7.737-9.204-.812-32.188-18.199-34.25-19.838-2.594-2.065-5.254-4.302-2.618-7.757 2.986-3.91 10.752-5.388 15.561-6.45 20.44-4.517 32.17 8.44 30.12 26.308" fill="#9A7560"/><path d="M421 802.883a11.266 11.266 0 011.8-2.937c2.37-2.78 5.993-4.32 9.647-4.777 3.654-.457 7.364.076 10.96.866 5.974 1.313 11.913 3.41 16.653 7.231 2.35 1.893 4.409 4.471 5.894 7.34a33.544 33.544 0 01-.178 5.61c-.54 4.669-2.96 8.252-8.86 7.734-9.25-.812-32.353-18.194-34.426-19.833a31.567 31.567 0 01-1.49-1.234M340.23 816.213c.536 4.67 2.945 8.255 8.814 7.737 9.203-.812 32.188-18.199 34.25-19.838 2.594-2.065 5.254-4.302 2.618-7.757-2.986-3.91-10.752-5.388-15.562-6.45-20.439-4.517-32.169 8.44-30.12 26.308" fill="#9A7560"/><path d="M385 802.883a11.287 11.287 0 00-1.8-2.937c-2.37-2.78-5.993-4.32-9.648-4.777-3.654-.457-7.363.076-10.958.866-5.975 1.313-11.915 3.41-16.654 7.231-2.35 1.893-4.409 4.471-5.895 7.34a33.462 33.462 0 00.18 5.61c.538 4.669 2.96 8.252 8.859 7.734 9.25-.812 32.353-18.194 34.426-19.833.508-.402 1.017-.81 1.49-1.234" fill="#9A7560"/><path d="M428 831c0 6.627-10.968 12-24.5 12-13.53 0-24.5-5.373-24.5-12s10.97-12 24.5-12c13.532 0 24.5 5.373 24.5 12" fill="#F26200"/><path d="M440.154 788.003c-7.256-22.112-25.092-23.358-36.594-22.945l-.06.003-.06-.003c-11.502-.413-29.338.833-36.594 22.945-11.136 33.938 12.419 45.83 35.777 45.997.29 0 .583 0 .877-.003.294.003.588.004.877.003 23.358-.167 46.913-12.06 35.777-45.997" fill="#FFFFFE"/><path d="M417.572 785c-2.867.806-5.399 2.548-8.264 3.363-2.105.6-4.337.465-6.166-.548v-.153l-.142.076-.143-.076v.153c-1.828 1.013-4.06 1.147-6.166.548-2.864-.815-5.396-2.557-8.264-3.363a78.847 78.847 0 00-.09 15.473c.27 2.925.802 6.04 2.841 8.16 3.045 3.163 7.775 4.387 11.802 4.367 4.031-.02 8.783-1.189 11.841-4.367 2.04-2.12 2.572-5.235 2.842-8.16a78.786 78.786 0 00-.09-15.473" fill="#AC3C4A"/><path d="M393.515 759.03c2.224-1.373 6.01-2.07 9.97-2.028h.032c3.96-.043 7.744.655 9.967 2.029 10.587 6.555.614 16.182-9.967 16.966V776h-.032v-.003c-10.581-.784-20.556-10.411-9.97-16.966" fill="#4D3422"/><path d="M403.5 786c.83 0 1.5-.499 1.5-1.114v-9.772c0-.615-.67-1.114-1.5-1.114s-1.5.499-1.5 1.114v9.772c0 .615.67 1.114 1.5 1.114" fill="#0F0F0D"/><path d="M386.674 781.224c.653-.448 1.504-.204 1.895.548 1.112 2.128 4.98 4.404 6.949 4.842 2.848.632 5.038-.188 7.375-1.647v-.128l.108.064.106-.064v.128c2.336 1.46 4.527 2.279 7.375 1.647 1.969-.438 5.838-2.714 6.949-4.842.39-.752 1.242-.996 1.895-.548.656.45.87 1.42.479 2.17-1.718 3.292-6.564 5.83-8.794 6.326-.865.194-1.68.28-2.452.28-2.129 0-3.924-.67-5.558-1.555-1.636.884-3.431 1.555-5.558 1.555-.774 0-1.59-.086-2.453-.28-2.23-.495-7.077-3.034-8.794-6.326-.391-.75-.179-1.72.478-2.17" fill="#4D3422"/></g><g><path d="M161.046 237c15.663 0 19.954-2.564 19.954-5.38 0-1.764-3.988-3.32-10.087-4.262 5.733-1.162 9.08-2.56 9.08-4.066 0-4.029-23.95-7.292-53.5-7.292C96.95 216 73 219.263 73 223.292c0 3.768 17.11 7.344 47.099 7.344 2.07 0 4.202-.017 6.393-.052 2.612-.042 5.176-.027 7.688-.076 2.589 3.61 12.787 6.4 25.865 6.488.34.002.672.004 1.001.004" fill-opacity=".25" fill="#000"/><path d="M168.876 198.522c2.484 7.205 9.28 12.769 10.063 20.344.213 2.063-.102 4.287-1.423 5.895-1.784 2.171-5.056 2.695-7.751 1.866-2.697-.829-4.901-2.766-6.787-4.852-5.204-5.757-8.655-13.204-8.961-20.934-.134-3.38.501-7.118 3.114-9.289 2.232-1.854 5.972-2.042 8.494-.592 2.477 1.424 2.422 5.156 3.251 7.562" fill="#ABADB3"/><path d="M85.566 187.212c2.034 3.072-3.643 3.132-5.316 2.405-6.549-2.858-13.747-12.582-15.997-19.793-.48-1.54-.337-3.872.961-4.615 1.27-.728 2.68.585 3.612 1.796 1.999 2.597 14.062 16.164 16.74 20.207" fill="#FFFFFE"/><path d="M80.743 181.914c6.155-5.334 22.717-4.307 25.117-4.157 4.201.266 21.237-6.46 23.257-9.06 4.58-5.898 9.82-7.807 18.063-7.692 5.966.083 11.848 2.786 15.779 7.253 1.894 2.152 3.334 4.665 4.552 7.256 1.488 3.161 2.672 6.758 2.465 10.292-.172 2.941-2.285 5.595-2.1 8.528.52 8.275-3.116 16.4-11.573 22.003-10.756 7.124-23.788 4.61-35.473 2.086-5.035-1.088-6.217-2.9-11.436-2.875-4.852.026-10.576 2.55-15.417 2.175-8.585-.662-16.783 4.236-20.023-4.08-2.843-7.3 1.035-26.742 6.79-31.73" fill="#FFFFFE"/><path d="M94.838 209.417c3.416-3.094 7.245-3.273 11.617-2.97 6.536.45 12.606 4.307 19.285 3.447 6.598-.852 13.216-3.017 19.38-5.396 0 0 8.011 4.641 20.88-.498-1.709 4.783-4.011 10.608-9.164 14.041-7 4.666-17.074 3.746-25.222 4.416-9.278.763-18.622.723-27.892-.126-3.153-.288-8.678-.668-10.823-3.452-2.042-2.653-.264-7.466 1.94-9.462" fill="#ABADB3"/><path d="M130.555 157.255c-2.292 1.734-4.468 5.748-4.527 8.581-.056 2.697-.948 12.895 13.874 19.81 15.69 7.32 30.854 4.015 33.495.206 6.928-9.995-1.358-17.332-8.696-23.085-6.909-5.414-18.133-12.536-27.461-8.659-2.008.835-4.91 1.805-6.685 3.147" fill="#F26200"/><path d="M188.548 118.752c1.303 4.42-.248 8.152-4.152 9.097-6.12 1.483-28.068-8.439-29.953-9.444-2.37-1.268-4.844-2.679-4.388-6.49.518-4.313 7.285-8.592 10.21-10.28 16.083-9.281 23.296.214 28.283 17.117" fill="#9A7560"/><path d="M206.326 150.603c-1.4-5.65-10.748-6.882-15.216-10.152-4.693-3.435-5.457-8.302-8.39-13.162-2.509-4.154-5.14-9.747-9.126-12.673-7.96-5.837-15.91-5.174-24.786-3.233-11.876 2.595-21.474 5.791-28.711 15.846-4.286 5.955-5.573 23.197 5.813 37.058 5.514 6.714 25.902 24.541 52.664 18.473 8.227-1.865 15.45-3.82 23.113-11.3 4.53-4.42 6.445-13.57 4.639-20.857" fill="#FFFFFE"/><path d="M181.916 147.599c1.463-2.653 1.258-5.748.481-8.64-2.132-7.943-12.731-19.62-22.195-22.785-8.694-2.825-16.986.388-26.214 0-2.749-.117-5.27 3.721-8.081 3.748-2.41 2.25-5.677 3.514-7.71 9.468-2.085 6.113-2.148 7.73-2.196 12.108-.062 5.59 3.97 21.511 19.894 32.016 1.209.648.165.648 1.75 0 7.967-3.256 22.557-8.717 31.599-11.98 9.59-3.396 10.126-9.318 12.672-13.935z" fill="#C17358"/><path d="M163.844 140.649c1.536 4.323 4.64 7.089 6.936 6.177 2.295-.91 2.91-5.152 1.376-9.474-1.536-4.323-4.64-7.09-6.936-6.178-2.295.91-2.91 5.153-1.376 9.475" fill="#0F0F0D"/><path d="M101.356 102.5c-3.006 3.367-3.239 9.545-.1 12.911 1.258 1.351 2.879 2.317 4.54 3.132a35.03 35.03 0 004.947 1.976c2.15.675 4.367 1.142 6.485 1.913 4.55 1.655 8.55 4.672 13.226 5.938 5.51 1.492 11.692.29 16.226-3.156 1.29-.98 1.797-2.247 2.17-3.774 1.181-4.864-4.907-13.928-7.603-17.675-14.831-20.614-27.123-15.57-39.891-1.265" fill="#9A7560"/><path d="M194.726 148.092c1.065-1.23 3.123-2.238 5.39-2.782l.008-.002.01-.002c2.253-.601 3.296-.25 4.719.483 4.835 2.494 4.02 10.026-1.903 12.075v.001l-.007.002-.01.003-.001-.002c-6.155 1.01-13.277-3.912-8.206-9.776" fill="#4D3422"/><path d="M192.817 168.975c-.574-.216-1.01-.906-.73-1.45.192-.373.629-.541 1.028-.677.82-.28 6.857-1.531 7.138-3.228.171-1.028.148-2.127.22-3.165l.38-5.46a1.071 1.071 0 011.146-.992c.592.04 1.039.551.998 1.14l-.417 6.001c-.114 1.643.348 4.147-.945 5.453-1.34 1.354-8.244 2.595-8.818 2.378" fill="#4D3422"/><path d="M132.518 221.032c-4.92-7.195-6.422-28.81 7.272-25.734 6.914 1.553 6.948 8.154 8.665 13.96.335 1.134.676 2.281 1.28 3.295 1.106 1.854 2.978 3.085 4.785 4.253 2.61 1.684 5.282 3.396 8.293 4.13 2.778.677 5.68.482 8.539.518 2.858.038 5.837.353 8.25 1.897 2.412 1.546 4.057 4.634 3.14 7.362-.887 2.643-3.823 4.087-6.587 4.262-2.765.175-5.486-.62-8.225-1.035-4.044-.615-8.167-.404-12.236-.816-8.805-.89-18.155-4.751-23.176-12.092" fill="#FFFFFE"/><path d="M155.706 219.26c-.902 1.93-1.022 4.352.123 6.139 1.481 2.309 4.584 2.92 7.234 2.457 2.651-.464 5.093-1.758 7.693-2.461.904-.244 5.389-2.777 6.547-3.148 2.978-.954-4.439-4.295-6.234-5.736-4.817-3.865-12.44-3.507-15.363 2.75" fill="#CBCCD0"/><path d="M156.736 217.26c-.94 1.93-1.066 4.352.129 6.14 1.543 2.309 4.778 2.919 7.54 2.456 2.764-.463 5.31-1.758 8.02-2.46.942-.244 1.954-.442 2.67-1.094 2.378-2.165-.472-6.35-2.344-7.791-5.02-3.865-12.968-3.507-16.015 2.75M112.097 196.661c1.36 4.805.644 10.459-2.13 14.32-1.555 2.166-3.639 3.693-5.408 5.614.103-.111 3.974-.343 5.836.934 1.733 1.188 3.257 2.904 3.547 4.99.83 5.974-7.446 6.68-10.552 6.442-15.607-1.19-15.16-7.204-14.483-7.36-4.103.945-7.914 2.235-11.405-1.61-3.114-3.427-4.06-9.003-3.199-13.927 1.326-7.58 5.923-14.173 11.823-17.37 1.91-1.034 3.991-1.992 6.066-2.44 3.738-.808 7.666-2.184 11.376-.33 3.885 1.941 7.188 6.003 8.529 10.737" fill="#FFFFFE"/><path d="M111.694 207.599s8.972-20.1-12.694-21.555c0 0 21.297-2.114 14.75 22.956l-2.056-1.401" fill="#ABADB3"/></g><g><path d="M678.806 243c-.569 0-1.142-.004-1.726-.012-36.864-.512-66.08-14.938-66.08-19.88 0-4.944 8.996-6.215 36.75-6.215 27.748 0 53.117 10.267 57.735 12.618 9.524 4.847-.235 13.489-26.679 13.489" fill-opacity=".25" fill="#000"/><path d="M638.843 167.723c3.503 2.453-4.335 3.51-6.324 2.695-7.792-3.204-15.979-14.333-18.656-22.414-.572-1.727-.777-4.108.767-4.941 1.51-.816 3.297.583 4.297 2.012 6.263 8.949 12.87 17.713 19.916 22.648" fill="#CBCCD0"/><path d="M651.527 212.216c1.902 4.475 4.66 10.641 9.202 12.999 2.79 1.448 6.171.821 8.295-1.157.603-.56 1.128-1.237 1.37-2.055.24-.818.165-1.796-.343-2.555-.685-1.023-1.965-1.44-2.77-2.372-1.772-2.05-1.263-7.14-1.132-9.528.2-3.636.823-7.19 1.398-10.74.378-2.33.73-4.686.612-7.096-.267-5.396-2.924-10.692-6.502-14.972-4.277-5.114-14.554-10.735-18.821-3.723-1.867 3.068-.492 7.425.216 10.887.979 4.793 1.984 9.586 3.207 14.343 1.39 5.407 3.06 10.777 5.268 15.969" fill="#ABADB3"/><path d="M698.593 179.832a11.598 11.598 0 00-1.557 3.57c-.756 3.054-.563 6.19-.84 9.297-.74 8.33-4.775 14.008-5.488 14.66-2.87 2.626-4.754-2.354-8.073-.633-4.274 2.216-3.022 12.714 7.37 13.309 7.683.442 14.631-10.444 17.276-17.2 2.506-6.4 3.814-16.125 2.262-22.543-.695-2.88-3.087-4.532-6.522-3.773-1.856.411-3.357 1.698-4.428 3.313" fill="#FFFFFE"/><path d="M707.669 187.91c2.079-3.826 2.629-9.188.462-13.226-1.026-1.91-2.552-3.371-4.117-4.66-5.937-4.89-13.71-6.08-21.127-6.79-7.526-.721-16.02-2.124-23.52-3.202-13.155-1.893-25.717 2.684-27.213 5.308-2.29 4.016 1.785 10.304 1.351 14.794-.545 5.648-1.347 12.638 5.364 14.75 2.753.866 5.708.73 8.57 1.115 2.792.377 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.236 12-.992 16.055-5.829 20.444-13.908M681.277 205.333c-2.053.777-3.556 2.715-4.042 4.85-.13.575-.195 1.17-.116 1.754.164 1.207.956 2.287 2 2.92 1.045.632 2.317.84 3.531.705 2.046-.23 3.978-1.47 4.932-3.289.87-1.657 1.04-4.403-.45-5.773-1.54-1.416-3.898-1.905-5.855-1.167" fill="#FFFFFE"/><path d="M665.178 196.338c-5.04-1.131-9.96-2.772-15.032-3.746-4.9-.94-10.248-1.098-15.22-.388.87 1.167 2.123 2.107 3.943 2.68 2.753.866 5.708.73 8.57 1.115 2.792.378 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.237 7.725-.64 12.155-2.874 15.505-6.54a76.674 76.674 0 01-37.552 1.058" fill="#CBCCD0"/><path d="M671.052 183.562s.924 18.39 11.97 48.093l-12.766 4.105s-16.605-34.1-16.878-61.326l17.674 9.128" fill="#FFFFFE"/><path d="M689.464 232.467c1.94 5.617-3.182 7.6-8.604 8.47-6.99 1.123-9.279-.693-10.686-4.127-1.401-3.428 1.775-7.183 7.102-8.383 5.327-1.2 10.987.556 12.188 4.04M612.284 218.942c.859 1.847 2.204 3.595 6.766 3.27 4.028-.29 4.5-2.478 3.717-4.238-.368-.827-.897-.848-.978-2.282-.457-8.084-.467-9.982 3.737-13.676 1.21-1.063 3.595-.176 5.15-.146 4.622.089 9.066-2.867 11.744-6.816 3-4.423 4.832-9.917 5.5-15.271.569-4.555-.04-10.186-2.438-13.726-2.607-3.85-8.648-3.67-12.377-1.76-3.342 1.715-6.256 4.597-8.724 7.844-13.378 17.6-12.906 45.064-12.097 46.801" fill="#FFFFFE"/><path d="M664.833 159.844c-1.163 3.165-1.239 8.742-.055 11.85 1.126 2.958 3.272 5.552 5.239 7.405 4.348 4.102 9.773 5.96 14.988 6.321 7.644.53 15.597.47 21.832-6.189 3.11-3.323 5.732-6.742 6.285-12.354 1.451-14.73-8.676-18.05-17.317-20.183-8.137-2.005-20.627-3.446-26.746 5.989-1.317 2.03-3.324 4.71-4.226 7.16" fill="#F26200"/><path d="M655.692 121.243c1.549-12.2 17.777-17.841 28.265-20.268 1.886-.436 4.147-.712 6.624-.832 2.467-.243 4.743-.3 6.675-.144 10.729.87 27.606 4.083 30.918 15.926 2.644 9.45-.957 19.755-4.2 29.641-1.48 4.514-3.041 9.074-3.156 13.347-.344 12.693-11.272 21.047-23.1 21.155-11.827.11-24.366-6.143-28.071-17.622-1.312-4.07-3.35-8.242-5.473-12.493-4.651-9.306-9.716-18.976-8.482-28.71" fill="#FFFFFE"/><path d="M669.093 160.834c-1.297-3.557-3.075-7.189-4.92-10.88-4.65-9.307-9.715-18.977-8.48-28.711.631-4.98 3.71-8.865 7.843-11.886 7.256 5.853 17.846 5.088 24.834 11.928 8.217 8.045 5.428 21.632-2.94 28.233-2.785 2.199-6.31 2.74-9.257 4.627-2.606 1.67-4.766 4.49-7.08 6.689" fill="#C17358"/><path d="M670.01 135.508c.339 4.61 2.724 8.191 5.329 8 2.605-.192 4.443-4.082 4.104-8.692-.338-4.608-2.723-8.19-5.329-7.999-2.605.191-4.441 4.083-4.104 8.691M706.66 132.82c.338 4.608 2.724 8.19 5.328 8 2.606-.192 4.444-4.084 4.105-8.693-.338-4.608-2.724-8.19-5.33-8-2.604.192-4.442 4.084-4.104 8.692" fill="#0F0F0D"/><path d="M744.16 115.271c-.136 4.429-1.948 7.952-7 7.833-7.922-.187-28.77-15.105-30.646-16.518-2.36-1.78-4.787-3.719-2.773-7.135 2.283-3.867 8.819-5.745 12.856-7.046 17.16-5.531 28.08 5.925 27.563 22.866M639.783 122.93c.783 4.36 3.089 7.582 8.07 6.727 7.81-1.342 26.257-19.143 27.906-20.815 2.075-2.105 4.19-4.377 1.7-7.462-2.82-3.493-9.56-4.396-13.748-5.094-17.782-2.968-26.914 9.96-23.928 26.644" fill="#9A7560"/><path d="M701.933 170.125c-.313.122-.592.51-.871.653-.967.496-2.255.635-3.324.661a10.11 10.11 0 01-3.353-.48c-.426-.139-2.63-.861-2.682-1.37.286 2.72 2.297 5.108 4.828 6.147 2.53 1.04 5.479.819 7.98-.29 2.501-1.109 4.576-3.045 6.157-5.278-.698.984-3.74 1.11-4.805 1.071-.734-.026-1.65-.085-2.338-.361-.427-.172-.944-.798-1.413-.791l-.179.038" fill="#AC3C4A"/><path d="M695.894 153.27c1.385-1.026 3.827-1.673 6.418-1.834l.01-.001h.012c2.587-.22 5.095.065 6.617.877 7.243 3.871 1.194 10.782-5.687 11.814v.002h-.008l-.011.002v-.002c-6.958-.016-13.953-5.97-7.351-10.859" fill="#4D3422"/><path d="M702.728 171.332c.517.063.99-.332 1.057-.883l1.069-8.744c.067-.55-.297-1.049-.814-1.112-.518-.063-.99.332-1.059.883l-1.068 8.745c-.067.55.297 1.048.815 1.111" fill="#4D3422"/><path d="M691.052 167.99c.423-.317 1.014-.205 1.315.252.855 1.291 3.592 2.54 4.95 2.719 1.967.259 3.419-.37 4.94-1.41l-.006-.082.077.035.069-.045.005.081c1.657.808 3.185 1.217 5.092.675 1.319-.376 3.844-2.01 4.501-3.414.232-.495.798-.692 1.264-.441.467.251.657.855.426 1.35-1.015 2.17-4.193 4.02-5.687 4.445-.58.166-1.13.262-1.654.3-1.447.107-2.7-.229-3.852-.707-1.07.642-2.26 1.156-3.708 1.262a8.128 8.128 0 01-1.681-.055c-1.54-.202-4.954-1.568-6.274-3.568-.301-.455-.202-1.081.223-1.398" fill="#4D3422"/></g><g transform="translate(302.5 140)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="26.971" y="28">leave home</tspan></text></g><g transform="translate(551.5 736)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="25.627" y="28">arrive home</tspan></text></g><rect stroke="#555762" stroke-width="4" fill="#FFF" x="22" y="257" width="736" height="413" rx="20"/><g><path d="M35.83 255h709.36c8.285 0 15 6.716 15 15v35H20.83v-35c0-8.284 6.717-15 15-15z" fill="#555762"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(20.83 254.667)"><tspan x="308.945" y="35">on a walk</tspan></text></g><g transform="translate(106.869 374.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="26.256" y="35">walking</tspan></text></g><g transform="translate(519.869 375.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="24.575" y="35">running</tspan></text></g><g transform="translate(175.869 599.667)"><rect fill="#555762" x=".37" y=".333" width="427.63" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="25.133" y="35">stopping to sniff good smells</tspan></text></g><path stroke="#555762" stroke-width="3" d="M229.5 424.5v174"/><g transform="translate(66 368)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g transform="translate(184.5 460)"><rect fill="#1955DD" width="88.798" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.626" y="28">stop</tspan></text></g><path fill="#555762" d="M606 364h-20l10 14zM239 587h-20l10 14z"/><path stroke="#555762" stroke-width="3" d="M550.5 426.5v174"/><path fill="#555762" d="M540 438h20l-10-14zM615 637v-20l-14 10zM130 436h20l-10-14zM271 411v-20l-14 10z"/><path stroke="#555762" stroke-width="3" d="M520.5 401.5h-260"/><g transform="translate(314.5 380)"><rect fill="#1955DD" width="150.658" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.467" y="28">slow down</tspan></text></g><path d="M183 375.667V361c.064-13.333 6.73-20 20-20h373.192c13.333.386 20 7.052 20 20v16M666.186 399.66h14.666c13.334.064 20 6.73 20 20v187.032c-.385 13.333-7.052 20-20 20h-78M139.852 424v182.692c.386 13.333 7.052 20 20 20H178" stroke="#555762" stroke-width="3"/><g transform="translate(438.5 520)"><rect fill="#1955DD" width="225.488" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.451" y="28">sudden speed up</tspan></text></g><g transform="translate(320.5 320)"><rect fill="#1955DD" width="140.68" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.491" y="28">speed up</tspan></text></g><g transform="translate(568.5 461)"><rect fill="#1955DD" width="171.61" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.587" y="28">sudden stop</tspan></text></g><g transform="translate(39.5 520)"><rect fill="#1955DD" width="140.68" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.491" y="28">speed up</tspan></text></g></g></g></svg>

复合状态还应指定哪个子状态是初始状态。 在 **on a walk** 状态下，初始状态为 **walking**。

复合状态使状态图能够处理比日常状态机更复杂的情况。

### 原子状态 Atomic States

原子状态是没有任何子状态的状态。**等待（Waiting）**, **遛狗完成（walk complete）**, **走路（walking）**, **奔跑（running）** 和 **停下来闻闻好闻的（stopping to sniff good smells）** 都是原子状态。

### 并行状态 Parallel States

并行状态是一种复合状态，其中所有子状态（也称为区域）同时处于活动状态。 这些区域在复合状态容器内由虚线分隔。

在 **on a walk** 复合状态内，可能有两个区域。 一个区域包含狗的 **walking**、 **running** 和 **stopping to sniff good smells** 的活动子状态，另一个区域包含狗的尾巴 **摇动（wagging）** 和 **不摇动（not wagging）** 状态。 狗可以走路和摇尾巴，跑和摇尾巴，或者在摇尾巴的同时停下来闻，它也可以在不摇尾巴的情况下进行任何这些活动。

<svg width="780" height="1315" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v1315H0z"/><g transform="translate(59.869 19.667)"><rect fill="#555762" x=".131" y=".333" width="151.19" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="28.506" y="35">waiting</tspan></text></g><g><g transform="translate(520.19 1233.667)"><rect stroke="#555762" stroke-width="7" fill="#555762" x="-3.292" y="-3.167" width="246.792" height="57" rx="15"/><rect stroke="#FFF" stroke-width="3" x="-1.292" y="-1.167" width="242.792" height="53" rx="15"/></g><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(520.19 1233.667)"><tspan x="24.887" y="35">walk complete</tspan></text></g><g transform="translate(20 15)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><path d="M211.5 45l84.5-.167h74.5c13.333.386 20 7.053 20 20v189.834" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M400 243h-20l10 14z"/><path stroke="#555762" stroke-width="3" d="M640 1058l-.5 169.667"/><path fill="#555762" d="M650 1217h-20l10 14z"/><g><path d="M381.907 1234.827c1.552 1.197 4.985 5.203 5.09 8.018.146 3.969-3.924 3.363-5.725 2.582-7.053-3.068-14.464-13.729-16.888-21.47-.518-1.654-.703-3.934.695-4.733 1.368-.781 2.887.629 3.889 1.928 2.153 2.788 4.126 5.733 6.242 8.552 2.1 2.798 4.029 3.065 6.697 5.123" fill="#CBCCD0"/><path d="M403.003 1292c-27.618 0-50.003-6.714-50.003-14.999 0-8.288 22.385-15.001 50.003-15.001 27.612 0 49.997 6.713 49.997 15.001 0 8.285-22.385 14.999-49.997 14.999z" fill-opacity=".25" fill="#000"/><path d="M374.557 1277.627c4.467-1.053 9.733-2.461 12.966-7.275 3.117-4.644 3.39-13.427.26-18.851-6.737-11.665-19.415-20.344-26.205-6.08-3.17 6.661 1.694 16.173 5.067 21.117-1.846.95-4.043.031-5.581 2.203-1.344 1.898-1.48 5.292-.031 7.26 3.585 4.866 9.503 2.57 13.524 1.626M433.141 1275.877c-4.607-.902-10.035-2.134-13.433-6.949-3.277-4.648-3.709-13.659-.584-19.364 6.72-12.26 19.588-21.693 26.797-7.313 3.37 6.72-1.464 16.69-4.845 21.911 1.914.899 4.152-.13 5.766 2.04 1.415 1.895 1.61 5.373.156 7.452-3.602 5.15-9.714 3.032-13.857 2.223" fill="#CBCCD0"/><path d="M424.197 1220.326c-4.788-10.453-18.307-10.463-25.723-7.94-5.913 2.011-11.47 4.554-14.752 12.495-1.897 4.596-2.195 9.208-1.05 14.246.611 2.696 1.604 5.16 2.291 7.805.571 2.2.337 3.322.527 5.48.568 6.58 3.228 14.507 6.325 19.22.79 1.205 2.703 1.792 3.64 2.874 5.277.49 15.72.657 21.077.31 2.903-3.342 5.035-8.45 6.98-12.804 5.024-11.243 6.6-28.777.685-41.686" fill="#ABADB3"/><path d="M417.667 1228.554s6.887 20.446-3.667 45.897l15.245 3.549s12.603-31.506-3.227-58l-8.351 8.554" fill="#FFFFFE"/><path d="M425.515 1231.908c1.6-2.536 2.092-6.05.55-8.654-.728-1.233-1.834-2.163-2.974-2.98-8.71-6.254-41.761-7.897-37.756 10.972 3.616 17.038 33.546 11.18 40.18.662M411.12 1276.843c-.867 4.373 3.079 8.432 8.812 9.072 5.73.638 11.08-2.386 11.949-6.76.865-4.367-3.078-8.43-8.81-9.07-5.732-.638-11.084 2.386-11.952 6.758" fill="#FFFFFE"/><path d="M390.333 1228.554S383.445 1249 394 1274.451L378.756 1278s-12.604-31.506 3.225-58l8.352 8.554" fill="#FFFFFE"/><path d="M396.88 1276.843c.867 4.373-3.078 8.432-8.812 9.072-5.73.638-11.08-2.386-11.95-6.76-.863-4.367 3.079-8.43 8.81-9.07 5.734-.638 11.085 2.386 11.953 6.758" fill="#FFFFFE"/><path d="M465.77 1204.213c-.537 4.67-2.946 8.255-8.814 7.737-9.204-.812-32.188-18.199-34.25-19.838-2.594-2.065-5.254-4.302-2.618-7.757 2.986-3.91 10.752-5.388 15.561-6.45 20.44-4.517 32.17 8.44 30.12 26.308" fill="#9A7560"/><path d="M421 1190.883a11.266 11.266 0 011.8-2.937c2.37-2.78 5.993-4.32 9.647-4.777 3.654-.457 7.364.076 10.96.866 5.974 1.313 11.913 3.41 16.653 7.231 2.35 1.893 4.409 4.471 5.894 7.34a33.544 33.544 0 01-.178 5.61c-.54 4.669-2.96 8.252-8.86 7.734-9.25-.812-32.353-18.194-34.426-19.833a31.567 31.567 0 01-1.49-1.234M340.23 1204.213c.536 4.67 2.945 8.255 8.814 7.737 9.203-.812 32.188-18.199 34.25-19.838 2.594-2.065 5.254-4.302 2.618-7.757-2.986-3.91-10.752-5.388-15.562-6.45-20.439-4.517-32.169 8.44-30.12 26.308" fill="#9A7560"/><path d="M385 1190.883a11.287 11.287 0 00-1.8-2.937c-2.37-2.78-5.993-4.32-9.648-4.777-3.654-.457-7.363.076-10.958.866-5.975 1.313-11.915 3.41-16.654 7.231-2.35 1.893-4.409 4.471-5.895 7.34a33.462 33.462 0 00.18 5.61c.538 4.669 2.96 8.252 8.859 7.734 9.25-.812 32.353-18.194 34.426-19.833.508-.402 1.017-.81 1.49-1.234" fill="#9A7560"/><path d="M428 1219c0 6.627-10.968 12-24.5 12-13.53 0-24.5-5.373-24.5-12s10.97-12 24.5-12c13.532 0 24.5 5.373 24.5 12" fill="#F26200"/><path d="M440.154 1176.003c-7.256-22.112-25.092-23.358-36.594-22.945l-.06.003-.06-.003c-11.502-.413-29.338.833-36.594 22.945-11.136 33.938 12.419 45.83 35.777 45.997.29 0 .583 0 .877-.003.294.003.588.004.877.003 23.358-.167 46.913-12.06 35.777-45.997" fill="#FFFFFE"/><path d="M417.572 1173c-2.867.806-5.399 2.548-8.264 3.363-2.105.6-4.337.465-6.166-.548v-.153l-.142.076-.143-.076v.153c-1.828 1.013-4.06 1.147-6.166.548-2.864-.815-5.396-2.557-8.264-3.363a78.847 78.847 0 00-.09 15.473c.27 2.925.802 6.04 2.841 8.16 3.045 3.163 7.775 4.387 11.802 4.367 4.031-.02 8.783-1.189 11.841-4.367 2.04-2.12 2.572-5.235 2.842-8.16a78.786 78.786 0 00-.09-15.473" fill="#AC3C4A"/><path d="M393.515 1147.03c2.224-1.373 6.01-2.07 9.97-2.028h.032c3.96-.043 7.744.655 9.967 2.029 10.587 6.555.614 16.182-9.967 16.966v.003h-.032v-.003c-10.581-.784-20.556-10.411-9.97-16.966" fill="#4D3422"/><path d="M403.5 1174c.83 0 1.5-.499 1.5-1.114v-9.772c0-.615-.67-1.114-1.5-1.114s-1.5.499-1.5 1.114v9.772c0 .615.67 1.114 1.5 1.114" fill="#0F0F0D"/><path d="M386.674 1169.224c.653-.448 1.504-.204 1.895.548 1.112 2.128 4.98 4.404 6.949 4.842 2.848.632 5.038-.188 7.375-1.647v-.128l.108.064.106-.064v.128c2.336 1.46 4.527 2.279 7.375 1.647 1.969-.438 5.838-2.714 6.949-4.842.39-.752 1.242-.996 1.895-.548.656.45.87 1.42.479 2.17-1.718 3.292-6.564 5.83-8.794 6.326-.865.194-1.68.28-2.452.28-2.129 0-3.924-.67-5.558-1.555-1.636.884-3.431 1.555-5.558 1.555-.774 0-1.59-.086-2.453-.28-2.23-.495-7.077-3.034-8.794-6.326-.391-.75-.179-1.72.478-2.17" fill="#4D3422"/></g><g><path d="M161.046 237c15.663 0 19.954-2.564 19.954-5.38 0-1.764-3.988-3.32-10.087-4.262 5.733-1.162 9.08-2.56 9.08-4.066 0-4.029-23.95-7.292-53.5-7.292C96.95 216 73 219.263 73 223.292c0 3.768 17.11 7.344 47.099 7.344 2.07 0 4.202-.017 6.393-.052 2.612-.042 5.176-.027 7.688-.076 2.589 3.61 12.787 6.4 25.865 6.488.34.002.672.004 1.001.004" fill-opacity=".25" fill="#000"/><path d="M168.876 198.522c2.484 7.205 9.28 12.769 10.063 20.344.213 2.063-.102 4.287-1.423 5.895-1.784 2.171-5.056 2.695-7.751 1.866-2.697-.829-4.901-2.766-6.787-4.852-5.204-5.757-8.655-13.204-8.961-20.934-.134-3.38.501-7.118 3.114-9.289 2.232-1.854 5.972-2.042 8.494-.592 2.477 1.424 2.422 5.156 3.251 7.562" fill="#ABADB3"/><path d="M85.566 187.212c2.034 3.072-3.643 3.132-5.316 2.405-6.549-2.858-13.747-12.582-15.997-19.793-.48-1.54-.337-3.872.961-4.615 1.27-.728 2.68.585 3.612 1.796 1.999 2.597 14.062 16.164 16.74 20.207" fill="#FFFFFE"/><path d="M80.743 181.914c6.155-5.334 22.717-4.307 25.117-4.157 4.201.266 21.237-6.46 23.257-9.06 4.58-5.898 9.82-7.807 18.063-7.692 5.966.083 11.848 2.786 15.779 7.253 1.894 2.152 3.334 4.665 4.552 7.256 1.488 3.161 2.672 6.758 2.465 10.292-.172 2.941-2.285 5.595-2.1 8.528.52 8.275-3.116 16.4-11.573 22.003-10.756 7.124-23.788 4.61-35.473 2.086-5.035-1.088-6.217-2.9-11.436-2.875-4.852.026-10.576 2.55-15.417 2.175-8.585-.662-16.783 4.236-20.023-4.08-2.843-7.3 1.035-26.742 6.79-31.73" fill="#FFFFFE"/><path d="M94.838 209.417c3.416-3.094 7.245-3.273 11.617-2.97 6.536.45 12.606 4.307 19.285 3.447 6.598-.852 13.216-3.017 19.38-5.396 0 0 8.011 4.641 20.88-.498-1.709 4.783-4.011 10.608-9.164 14.041-7 4.666-17.074 3.746-25.222 4.416-9.278.763-18.622.723-27.892-.126-3.153-.288-8.678-.668-10.823-3.452-2.042-2.653-.264-7.466 1.94-9.462" fill="#ABADB3"/><path d="M130.555 157.255c-2.292 1.734-4.468 5.748-4.527 8.581-.056 2.697-.948 12.895 13.874 19.81 15.69 7.32 30.854 4.015 33.495.206 6.928-9.995-1.358-17.332-8.696-23.085-6.909-5.414-18.133-12.536-27.461-8.659-2.008.835-4.91 1.805-6.685 3.147" fill="#F26200"/><path d="M188.548 118.752c1.303 4.42-.248 8.152-4.152 9.097-6.12 1.483-28.068-8.439-29.953-9.444-2.37-1.268-4.844-2.679-4.388-6.49.518-4.313 7.285-8.592 10.21-10.28 16.083-9.281 23.296.214 28.283 17.117" fill="#9A7560"/><path d="M206.326 150.603c-1.4-5.65-10.748-6.882-15.216-10.152-4.693-3.435-5.457-8.302-8.39-13.162-2.509-4.154-5.14-9.747-9.126-12.673-7.96-5.837-15.91-5.174-24.786-3.233-11.876 2.595-21.474 5.791-28.711 15.846-4.286 5.955-5.573 23.197 5.813 37.058 5.514 6.714 25.902 24.541 52.664 18.473 8.227-1.865 15.45-3.82 23.113-11.3 4.53-4.42 6.445-13.57 4.639-20.857" fill="#FFFFFE"/><path d="M181.916 147.599c1.463-2.653 1.258-5.748.481-8.64-2.132-7.943-12.731-19.62-22.195-22.785-8.694-2.825-16.986.388-26.214 0-2.749-.117-5.27 3.721-8.081 3.748-2.41 2.25-5.677 3.514-7.71 9.468-2.085 6.113-2.148 7.73-2.196 12.108-.062 5.59 3.97 21.511 19.894 32.016 1.209.648.165.648 1.75 0 7.967-3.256 22.557-8.717 31.599-11.98 9.59-3.396 10.126-9.318 12.672-13.935z" fill="#C17358"/><path d="M163.844 140.649c1.536 4.323 4.64 7.089 6.936 6.177 2.295-.91 2.91-5.152 1.376-9.474-1.536-4.323-4.64-7.09-6.936-6.178-2.295.91-2.91 5.153-1.376 9.475" fill="#0F0F0D"/><path d="M101.356 102.5c-3.006 3.367-3.239 9.545-.1 12.911 1.258 1.351 2.879 2.317 4.54 3.132a35.03 35.03 0 004.947 1.976c2.15.675 4.367 1.142 6.485 1.913 4.55 1.655 8.55 4.672 13.226 5.938 5.51 1.492 11.692.29 16.226-3.156 1.29-.98 1.797-2.247 2.17-3.774 1.181-4.864-4.907-13.928-7.603-17.675-14.831-20.614-27.123-15.57-39.891-1.265" fill="#9A7560"/><path d="M194.726 148.092c1.065-1.23 3.123-2.238 5.39-2.782l.008-.002.01-.002c2.253-.601 3.296-.25 4.719.483 4.835 2.494 4.02 10.026-1.903 12.075v.001l-.007.002-.01.003-.001-.002c-6.155 1.01-13.277-3.912-8.206-9.776" fill="#4D3422"/><path d="M192.817 168.975c-.574-.216-1.01-.906-.73-1.45.192-.373.629-.541 1.028-.677.82-.28 6.857-1.531 7.138-3.228.171-1.028.148-2.127.22-3.165l.38-5.46a1.071 1.071 0 011.146-.992c.592.04 1.039.551.998 1.14l-.417 6.001c-.114 1.643.348 4.147-.945 5.453-1.34 1.354-8.244 2.595-8.818 2.378" fill="#4D3422"/><path d="M132.518 221.032c-4.92-7.195-6.422-28.81 7.272-25.734 6.914 1.553 6.948 8.154 8.665 13.96.335 1.134.676 2.281 1.28 3.295 1.106 1.854 2.978 3.085 4.785 4.253 2.61 1.684 5.282 3.396 8.293 4.13 2.778.677 5.68.482 8.539.518 2.858.038 5.837.353 8.25 1.897 2.412 1.546 4.057 4.634 3.14 7.362-.887 2.643-3.823 4.087-6.587 4.262-2.765.175-5.486-.62-8.225-1.035-4.044-.615-8.167-.404-12.236-.816-8.805-.89-18.155-4.751-23.176-12.092" fill="#FFFFFE"/><path d="M155.706 219.26c-.902 1.93-1.022 4.352.123 6.139 1.481 2.309 4.584 2.92 7.234 2.457 2.651-.464 5.093-1.758 7.693-2.461.904-.244 5.389-2.777 6.547-3.148 2.978-.954-4.439-4.295-6.234-5.736-4.817-3.865-12.44-3.507-15.363 2.75" fill="#CBCCD0"/><path d="M156.736 217.26c-.94 1.93-1.066 4.352.129 6.14 1.543 2.309 4.778 2.919 7.54 2.456 2.764-.463 5.31-1.758 8.02-2.46.942-.244 1.954-.442 2.67-1.094 2.378-2.165-.472-6.35-2.344-7.791-5.02-3.865-12.968-3.507-16.015 2.75M112.097 196.661c1.36 4.805.644 10.459-2.13 14.32-1.555 2.166-3.639 3.693-5.408 5.614.103-.111 3.974-.343 5.836.934 1.733 1.188 3.257 2.904 3.547 4.99.83 5.974-7.446 6.68-10.552 6.442-15.607-1.19-15.16-7.204-14.483-7.36-4.103.945-7.914 2.235-11.405-1.61-3.114-3.427-4.06-9.003-3.199-13.927 1.326-7.58 5.923-14.173 11.823-17.37 1.91-1.034 3.991-1.992 6.066-2.44 3.738-.808 7.666-2.184 11.376-.33 3.885 1.941 7.188 6.003 8.529 10.737" fill="#FFFFFE"/><path d="M111.694 207.599s8.972-20.1-12.694-21.555c0 0 21.297-2.114 14.75 22.956l-2.056-1.401" fill="#ABADB3"/></g><g><path d="M678.806 243c-.569 0-1.142-.004-1.726-.012-36.864-.512-66.08-14.938-66.08-19.88 0-4.944 8.996-6.215 36.75-6.215 27.748 0 53.117 10.267 57.735 12.618 9.524 4.847-.235 13.489-26.679 13.489" fill-opacity=".25" fill="#000"/><path d="M638.843 167.723c3.503 2.453-4.335 3.51-6.324 2.695-7.792-3.204-15.979-14.333-18.656-22.414-.572-1.727-.777-4.108.767-4.941 1.51-.816 3.297.583 4.297 2.012 6.263 8.949 12.87 17.713 19.916 22.648" fill="#CBCCD0"/><path d="M651.527 212.216c1.902 4.475 4.66 10.641 9.202 12.999 2.79 1.448 6.171.821 8.295-1.157.603-.56 1.128-1.237 1.37-2.055.24-.818.165-1.796-.343-2.555-.685-1.023-1.965-1.44-2.77-2.372-1.772-2.05-1.263-7.14-1.132-9.528.2-3.636.823-7.19 1.398-10.74.378-2.33.73-4.686.612-7.096-.267-5.396-2.924-10.692-6.502-14.972-4.277-5.114-14.554-10.735-18.821-3.723-1.867 3.068-.492 7.425.216 10.887.979 4.793 1.984 9.586 3.207 14.343 1.39 5.407 3.06 10.777 5.268 15.969" fill="#ABADB3"/><path d="M698.593 179.832a11.598 11.598 0 00-1.557 3.57c-.756 3.054-.563 6.19-.84 9.297-.74 8.33-4.775 14.008-5.488 14.66-2.87 2.626-4.754-2.354-8.073-.633-4.274 2.216-3.022 12.714 7.37 13.309 7.683.442 14.631-10.444 17.276-17.2 2.506-6.4 3.814-16.125 2.262-22.543-.695-2.88-3.087-4.532-6.522-3.773-1.856.411-3.357 1.698-4.428 3.313" fill="#FFFFFE"/><path d="M707.669 187.91c2.079-3.826 2.629-9.188.462-13.226-1.026-1.91-2.552-3.371-4.117-4.66-5.937-4.89-13.71-6.08-21.127-6.79-7.526-.721-16.02-2.124-23.52-3.202-13.155-1.893-25.717 2.684-27.213 5.308-2.29 4.016 1.785 10.304 1.351 14.794-.545 5.648-1.347 12.638 5.364 14.75 2.753.866 5.708.73 8.57 1.115 2.792.377 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.236 12-.992 16.055-5.829 20.444-13.908M681.277 205.333c-2.053.777-3.556 2.715-4.042 4.85-.13.575-.195 1.17-.116 1.754.164 1.207.956 2.287 2 2.92 1.045.632 2.317.84 3.531.705 2.046-.23 3.978-1.47 4.932-3.289.87-1.657 1.04-4.403-.45-5.773-1.54-1.416-3.898-1.905-5.855-1.167" fill="#FFFFFE"/><path d="M665.178 196.338c-5.04-1.131-9.96-2.772-15.032-3.746-4.9-.94-10.248-1.098-15.22-.388.87 1.167 2.123 2.107 3.943 2.68 2.753.866 5.708.73 8.57 1.115 2.792.378 5.397 1.31 8.062 2.172 2.332.752 4.803.6 7.132 1.412 7.081 2.464 17.037 2.861 24.592 2.237 7.725-.64 12.155-2.874 15.505-6.54a76.674 76.674 0 01-37.552 1.058" fill="#CBCCD0"/><path d="M671.052 183.562s.924 18.39 11.97 48.093l-12.766 4.105s-16.605-34.1-16.878-61.326l17.674 9.128" fill="#FFFFFE"/><path d="M689.464 232.467c1.94 5.617-3.182 7.6-8.604 8.47-6.99 1.123-9.279-.693-10.686-4.127-1.401-3.428 1.775-7.183 7.102-8.383 5.327-1.2 10.987.556 12.188 4.04M612.284 218.942c.859 1.847 2.204 3.595 6.766 3.27 4.028-.29 4.5-2.478 3.717-4.238-.368-.827-.897-.848-.978-2.282-.457-8.084-.467-9.982 3.737-13.676 1.21-1.063 3.595-.176 5.15-.146 4.622.089 9.066-2.867 11.744-6.816 3-4.423 4.832-9.917 5.5-15.271.569-4.555-.04-10.186-2.438-13.726-2.607-3.85-8.648-3.67-12.377-1.76-3.342 1.715-6.256 4.597-8.724 7.844-13.378 17.6-12.906 45.064-12.097 46.801" fill="#FFFFFE"/><path d="M664.833 159.844c-1.163 3.165-1.239 8.742-.055 11.85 1.126 2.958 3.272 5.552 5.239 7.405 4.348 4.102 9.773 5.96 14.988 6.321 7.644.53 15.597.47 21.832-6.189 3.11-3.323 5.732-6.742 6.285-12.354 1.451-14.73-8.676-18.05-17.317-20.183-8.137-2.005-20.627-3.446-26.746 5.989-1.317 2.03-3.324 4.71-4.226 7.16" fill="#F26200"/><path d="M655.692 121.243c1.549-12.2 17.777-17.841 28.265-20.268 1.886-.436 4.147-.712 6.624-.832 2.467-.243 4.743-.3 6.675-.144 10.729.87 27.606 4.083 30.918 15.926 2.644 9.45-.957 19.755-4.2 29.641-1.48 4.514-3.041 9.074-3.156 13.347-.344 12.693-11.272 21.047-23.1 21.155-11.827.11-24.366-6.143-28.071-17.622-1.312-4.07-3.35-8.242-5.473-12.493-4.651-9.306-9.716-18.976-8.482-28.71" fill="#FFFFFE"/><path d="M669.093 160.834c-1.297-3.557-3.075-7.189-4.92-10.88-4.65-9.307-9.715-18.977-8.48-28.711.631-4.98 3.71-8.865 7.843-11.886 7.256 5.853 17.846 5.088 24.834 11.928 8.217 8.045 5.428 21.632-2.94 28.233-2.785 2.199-6.31 2.74-9.257 4.627-2.606 1.67-4.766 4.49-7.08 6.689" fill="#C17358"/><path d="M670.01 135.508c.339 4.61 2.724 8.191 5.329 8 2.605-.192 4.443-4.082 4.104-8.692-.338-4.608-2.723-8.19-5.329-7.999-2.605.191-4.441 4.083-4.104 8.691M706.66 132.82c.338 4.608 2.724 8.19 5.328 8 2.606-.192 4.444-4.084 4.105-8.693-.338-4.608-2.724-8.19-5.33-8-2.604.192-4.442 4.084-4.104 8.692" fill="#0F0F0D"/><path d="M744.16 115.271c-.136 4.429-1.948 7.952-7 7.833-7.922-.187-28.77-15.105-30.646-16.518-2.36-1.78-4.787-3.719-2.773-7.135 2.283-3.867 8.819-5.745 12.856-7.046 17.16-5.531 28.08 5.925 27.563 22.866M639.783 122.93c.783 4.36 3.089 7.582 8.07 6.727 7.81-1.342 26.257-19.143 27.906-20.815 2.075-2.105 4.19-4.377 1.7-7.462-2.82-3.493-9.56-4.396-13.748-5.094-17.782-2.968-26.914 9.96-23.928 26.644" fill="#9A7560"/><path d="M701.933 170.125c-.313.122-.592.51-.871.653-.967.496-2.255.635-3.324.661a10.11 10.11 0 01-3.353-.48c-.426-.139-2.63-.861-2.682-1.37.286 2.72 2.297 5.108 4.828 6.147 2.53 1.04 5.479.819 7.98-.29 2.501-1.109 4.576-3.045 6.157-5.278-.698.984-3.74 1.11-4.805 1.071-.734-.026-1.65-.085-2.338-.361-.427-.172-.944-.798-1.413-.791l-.179.038" fill="#AC3C4A"/><path d="M695.894 153.27c1.385-1.026 3.827-1.673 6.418-1.834l.01-.001h.012c2.587-.22 5.095.065 6.617.877 7.243 3.871 1.194 10.782-5.687 11.814v.002h-.008l-.011.002v-.002c-6.958-.016-13.953-5.97-7.351-10.859" fill="#4D3422"/><path d="M702.728 171.332c.517.063.99-.332 1.057-.883l1.069-8.744c.067-.55-.297-1.049-.814-1.112-.518-.063-.99.332-1.059.883l-1.068 8.745c-.067.55.297 1.048.815 1.111" fill="#4D3422"/><path d="M691.052 167.99c.423-.317 1.014-.205 1.315.252.855 1.291 3.592 2.54 4.95 2.719 1.967.259 3.419-.37 4.94-1.41l-.006-.082.077.035.069-.045.005.081c1.657.808 3.185 1.217 5.092.675 1.319-.376 3.844-2.01 4.501-3.414.232-.495.798-.692 1.264-.441.467.251.657.855.426 1.35-1.015 2.17-4.193 4.02-5.687 4.445-.58.166-1.13.262-1.654.3-1.447.107-2.7-.229-3.852-.707-1.07.642-2.26 1.156-3.708 1.262a8.128 8.128 0 01-1.681-.055c-1.54-.202-4.954-1.568-6.274-3.568-.301-.455-.202-1.081.223-1.398" fill="#4D3422"/></g><g transform="translate(302.5 140)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="26.971" y="28">leave home</tspan></text></g><g transform="translate(551.5 1124)"><rect fill="#1955DD" width="174.603" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="25.627" y="28">arrive home</tspan></text></g><rect stroke="#555762" stroke-width="4" fill="#FFF" x="22" y="257" width="736" height="801" rx="20"/><g><path d="M35.83 255h709.36c8.285 0 15 6.716 15 15v35H20.83v-35c0-8.284 6.717-15 15-15z" fill="#555762"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(20.83 254.667)"><tspan x="308.945" y="35">on a walk</tspan></text></g><g><path d="M49 332h682v425H49V332z" stroke="#555762" stroke-width="6" stroke-dasharray="16,11"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#555762" transform="translate(49 332)"><tspan x="282.771" y="42">activities</tspan></text></g><g><path d="M49 777h682v250H49V777z" stroke="#555762" stroke-width="6" stroke-dasharray="16,11"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#555762" transform="translate(49 777)"><tspan x="321.47" y="37.059">tail</tspan></text></g><g transform="translate(106.869 454.667)"><rect fill="#555762" x=".142" y=".333" width="163.858" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="32.581" y="35">walking</tspan></text></g><g transform="translate(500.19 455.667)"><rect fill="#555762" x=".148" y=".333" width="170.852" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="34.394" y="35">running</tspan></text></g><g transform="translate(175.869 679.667)"><rect fill="#555762" x=".37" y=".333" width="427.63" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="25.133" y="35">stopping to sniff good smells</tspan></text></g><path stroke="#555762" stroke-width="3" d="M248.5 504.5v174"/><g transform="translate(66 448)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g transform="translate(203.5 540)"><rect fill="#1955DD" width="88.798" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.626" y="28">stop</tspan></text></g><path fill="#555762" d="M606 444h-20l10 14zM258 667h-20l10 14z"/><path stroke="#555762" stroke-width="3" d="M521.5 506.5v174"/><path fill="#555762" d="M511 518h20l-10-14zM615 717v-20l-14 10zM130 516h20l-10-14zM285 491v-20l-14 10z"/><path stroke="#555762" stroke-width="3" d="M520.5 481.5h-247"/><g transform="translate(315.5 460)"><rect fill="#1955DD" width="150.658" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.467" y="28">slow down</tspan></text></g><path d="M183 455.667V441c.064-13.333 6.73-20 20-20h373.192c13.333.386 20 7.052 20 20v16M666.186 479.66h14.666c13.334.064 20 6.73 20 20v187.032c-.385 13.333-7.052 20-20 20h-78M139.852 504v182.692c.386 13.333 7.052 20 20 20H178" stroke="#555762" stroke-width="3"/><g transform="translate(409.5 600)"><rect fill="#1955DD" width="225.488" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.451" y="28">sudden speed up</tspan></text></g><g transform="translate(320.5 400)"><rect fill="#1955DD" width="140.68" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.491" y="28">speed up</tspan></text></g><g transform="translate(127.869 894.667)"><rect fill="#555762" x=".178" y=".333" width="205.822" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="21.467" y="35">not wagging</tspan></text></g><g transform="translate(521.19 895.667)"><rect fill="#555762" x=".148" y=".333" width="170.852" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="29.609" y="35">wagging</tspan></text></g><g transform="translate(87 888)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><path fill="#555762" d="M627 884h-20l10 14z"/><path d="M204 895.667V881c.064-13.333 6.73-20 20-20h373.192c13.333.386 20 7.052 20 20v16" stroke="#555762" stroke-width="3"/><g transform="translate(302.5 840)"><rect fill="#1955DD" width="187.574" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="17.811" y="28">wagging starts</tspan></text></g><path fill="#555762" d="M194 957h20l-10-14z"/><path d="M204 946.846v14.667c.064 13.333 6.73 20 20 20h373.192c13.333-.386 20-7.053 20-20v-16" stroke="#555762" stroke-width="3"/><g transform="translate(302.5 961)"><rect fill="#1955DD" width="194.558" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.767" y="28">wagging stops</tspan></text></g><g transform="translate(540.5 541)"><rect fill="#1955DD" width="171.61" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.587" y="28">sudden stop</tspan></text></g><g transform="translate(79.5 600)"><rect fill="#1955DD" width="140.68" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="21.491" y="28">speed up</tspan></text></g></g></g></svg>

两个区域还应该指定哪个子状态是初始状态。 在我们的 **tail** 区域，初始状态是 **not wagging**。

### 自转换 Self-transition

自转换是指事件发生但转换返回到相同状态时。 转换箭头退出并重新进入相同的状态。

描述自我转变的一种有用方法是在过程中“一直做某事，但一直没变化”。

在狗讨好的过程中，会有一个 **讨好（begging）** 状态和一个 **获得好处（gets treat）** 事件。 而对于爱吃的狗来说，无论你经历了多少次得到 **gets treat** 事件，狗都会回到 **begging** 状态。

<svg width="780" height="355" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v355H0z"/><g transform="translate(299.869 82.667)"><rect fill="#555762" x=".173" y=".333" width="199.827" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="45.203" y="35">begging</tspan></text></g><g transform="translate(260 78)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g><path d="M401.283 333.007c-24.572 0-44.488-3.377-44.488-7.543 0-4.169 19.916-7.544 44.488-7.544 24.566 0 44.481 3.375 44.481 7.544 0 4.166-19.915 7.543-44.481 7.543z" fill-opacity=".25" fill="#000"/><path d="M451.66 295.727c3.362-.248 1.546 8.02 1.145 9.456-1.862 6.68-5.293 13.53-12.035 17.053-2.836 1.483-6.087 2.279-9.29 2.98-.946.207-1.977.097-2.79-.395-5.383-3.252 8.772-11.724 10.706-13.748 2.287-2.39 4.24-5.02 5.982-7.75 1.38-2.161 2.418-5.853 4.9-7.145.537-.28.994-.422 1.381-.45" fill="#FFFFFE"/><path d="M345.946 286.547c3.077 1.119 6.525 1.021 8.95-.839 1.772-1.359 2.504-5.137 3.439-5.227.83-.08 10.882 7.046 15.961 7.653 2.32.277 4.969.008 6.49-1.847.733-.894 1.104-2.043 1.446-3.165a158.649 158.649 0 005.208-23.246c.31-2.113.576-4.28.18-6.376-1.78-9.416-12.247-3.745-14.87 1.955-1.812 3.94-3.59 15.8-3.982 16.007-.379.2-8.041-5.108-13.83-5.595-10.797-.909-11.832 8.317-12.768 12.43-.68 2.993.7 7.131 3.776 8.25M412.667 313.52c-.034-2.72-1.124-5.404-2.569-7.89-3.294-5.672-9.002-11.56-16.089-14.017-6.42-2.225-19.956-3.326-24.498 1.562-.783.842-1.27 1.808-1.633 2.785-2.717 7.28 1.679 15.653 10.48 19.96-3.458.872-7.605 1.987-7.609 6.366-.004 6.078 20.926 5.889 21.461.167.225-2.404.128-2.242-.234-4.444 1.939 2.73 3.22 2.76 6.734 3.869 3.513 1.109 7.67.81 10.442-1.154 1.937-1.373 3.05-3.428 3.397-5.591a9.469 9.469 0 00.118-1.612z" fill="#ABADB3"/><path d="M431.73 325.26c-5.343.899-17.576-.298-22.975.236-7.352.727-30.111-15.5-34.303-53.756-1.404-12.812 7.323-24.573 21.41-28.61 4.54-1.302 17.633-6.266 22.17-3.395 4.31 2.727 8.842 12.526 9.827 19.317 1.678 11.562 2.336 25.083 5.716 32.638 8.448 18.884 10.798 31.443-1.845 33.57" fill="#FFFFFE"/><path d="M428.2 325.573a12.59 12.59 0 00-.854-7.389c-1.065-2.391-2.82-4.428-4.332-6.589-8.714-12.456-9.024-28.39-12.469-43.015-.436-1.856-1.266-6.365-2.63-4.98-1.987 2.016-11.054 13.821-32.896 2.288-.151-.079-.33-.07-.493-.1a24.441 24.441 0 00-.074 5.952c4.192 38.256 26.95 54.483 34.303 53.757 4.414-.438 13.395.296 19.444.076" fill="#ABADB3"/><path d="M418.957 229.08c1.785 1.703 1.38 6.864.959 9.266-.402 2.289-2.335 7.633-14.744 12.56-12.41 4.928-28.047 1.473-29.8-2.02-4.6-9.168 4.133-14.526 11.742-18.642 7.164-3.873 18.52-8.748 26.317-4.51 1.679.91 4.145 2.03 5.526 3.347" fill="#F26200"/><path d="M359.215 175.13c-1.13 4.558-.305 8.665 4.84 9.967 8.07 2.04 33.427-7.316 35.73-8.231 2.897-1.153 5.906-2.448 4.845-6.501-1.201-4.59-7.278-8.347-10.99-10.813-15.777-10.478-30.102-1.86-34.425 15.578" fill="#9A7560"/><path d="M349.202 213.588c.504-2.713 2.387-5.27 4.695-7.593 2.682-2.697 5.937-5.079 8.277-7.025 4.574-3.802 6.981-5.533 9.679-10.684 2.307-4.405 4.652-10.287 8.538-13.526 7.76-6.462 15.893-6.276 25.049-4.841 12.248 1.92 23.634 6.485 31.602 16.32 4.72 5.826 6.735 11.456 4.452 18.842a71.774 71.774 0 01-5.145 12.354c-4.163 7.865-34.306 32.783-61.92 28.235-8.49-1.4-13.497-2.478-20.269-10.647-4.125-4.976-6.363-13.87-4.958-21.435" fill="#FFFFFE"/><path d="M359.826 235.317c1.533 2.004 3.397 3.914 5.807 4.657 2.41.743 5.449-.064 6.534-2.34.932-1.955.22-4.258-.503-6.3-1.712.666-3.525 1.156-5.361 1.103-1.837-.054-3.707-.7-4.972-2.033-.195-.207-.387-.436-.652-.536-.364-.137-.765 0-1.139.103-1.465.405-2.727.11-4.136-.263.366.097.751.889.962 1.166.373.488.75.972 1.128 1.455.779.995 1.564 1.984 2.332 2.988" fill="#AC3C4A"/><path d="M389.02 187.954c-.368-5.45-3.4-10.52-7.69-13.924-.312.238-.627.47-.939.73-3.886 3.239-6.231 9.12-8.538 13.526-2.698 5.151-5.105 6.882-9.68 10.684-2.21 1.838-5.234 4.067-7.822 6.58 3.696-.687 7.14-1.328 9.668-1.157 5.72.39 11.797 1.162 16.907-1.437 5.364-2.728 8.497-8.997 8.093-15.002" fill="#C17358"/><path d="M405.597 207.563c-2.242 4.356-6.034 6.866-8.47 5.605-2.438-1.26-2.594-5.813-.353-10.168 2.242-4.356 6.033-6.866 8.471-5.605 2.435 1.26 2.593 5.812.352 10.168M378.252 196.984c-2.62 3.908-6.269 6.045-8.148 4.774-1.88-1.272-1.277-5.472 1.344-9.38 2.621-3.907 6.27-6.044 8.148-4.773 1.88 1.272 1.276 5.472-1.344 9.379" fill="#0F0F0D"/><path d="M458.36 210.287c-2.137 4.464-5.51 7.266-10.427 4.916-7.708-3.683-21.47-28.114-22.676-30.385-1.517-2.86-3.026-5.908.5-8.509 3.989-2.946 11.266-1.982 15.828-1.532 19.376 1.914 24.94 18.433 16.775 35.51" fill="#9A7560"/><path d="M368.662 213.46c-1.037-1.205-3.076-2.228-5.337-2.813l-.008-.002-.01-.003c-2.246-.64-4.515-.788-6.007-.27-7.112 2.47-3.034 10.044 2.856 12.171l-.001.003.008.001.01.004.001-.002c6.15 1.144 13.424-3.346 8.488-9.09M352.477 226.528a.928.928 0 01.423-.14c.551-.053.81.452 1.146.79.468.466 1.038.9 1.62 1.205 1.872.981 3.552.917 5.453.482l.024-.081.062.062.087-.018-.024.081c1.362 1.395 2.74 2.358 4.844 2.547 1.455.13 4.576-.504 5.745-1.611a.991.991 0 011.425.046c.374.417.344 1.07-.068 1.46-1.807 1.713-5.657 2.31-7.306 2.163a9.117 9.117 0 01-1.764-.329c-1.485-.436-2.614-1.227-3.593-2.116-1.304.218-2.68.27-4.166-.166a9.039 9.039 0 01-1.66-.68c-.817-.428-1.968-1.15-2.46-1.958-.33-.539-.318-1.398.212-1.737" fill="#4D3422"/><path d="M360.749 231.089c.272.097.582.085.862-.06.537-.282.758-.953.495-1.499-.028-.06-1.294-2.852-.852-8.283.048-.615-.397-1.149-.995-1.19-.602-.042-1.128.424-1.179 1.038-.5 6.149 1.005 9.318 1.07 9.451.128.264.348.451.599.543" fill="#4D3422"/><path d="M376.674 283.183c.832.443 1.867.755 3.138.9 1.762.204 3.548-.188 5.108-.982 1.638-.834 2.618-2.835 4.158-3.537 1.59-.724 3.744 1.194 5.159 1.987 1.94 1.085 3.895 2.178 6.034 2.893 4.909 1.643 10.821 2.47 13.657-2.41 3.694-6.357 4.52-15.831 5.63-22.865.318-2.015-9.207-7.887-12.898-3.074-3.216 4.195-4.389 7.708-5.453 11.747-.112.424-5.895-4.519-13.006-5.734-4.75-.811-7.642 2.045-10.07 5.314-3.221 4.34-7.19 12.71-1.457 15.76" fill="#ABADB3"/><path d="M379.493 286.358c.833.443 1.868.755 3.138.901 1.762.203 3.548-.19 5.108-.982 1.64-.835 2.618-2.837 4.159-3.538 1.59-.724 3.743 1.195 5.159 1.986 1.94 1.086 3.895 2.178 6.033 2.895 4.91 1.642 10.27 3.943 13.107-.938 3.694-6.356 5.072-17.304 6.18-24.339.319-2.013.592-4.078.184-6.077-1.829-8.978-12.58-3.572-15.275 1.863-1.862 3.757-2.138 8.045-3.203 12.083-.112.424-.27.894-.673 1.092-.39.191-.858.054-1.26-.11-3.824-1.56-6.533-5.313-10.576-6.218-4.045-.906-8.268 1.447-10.696 4.717-3.221 4.338-7.118 13.613-1.385 16.665" fill="#ABADB3"/><path d="M416.196 285.218s11.25 4.139 12.796 11.46c0 0-11.258-8.648-15.488-8.665l2.692-2.795" fill="#ABADB3"/><path d="M436.02 307.13c-2.612-6.817-7.457-12.42-14.31-16.836-5.726-3.69-18.926-5.946-23.976-.462-.87.945-1.459 2.05-1.928 3.173-3.49 8.373-.018 18.38 8.279 23.86-3.536.844-8.135 2.08-8.261 7.056-.212 8.428 18.972 7.408 21.636 2.307 1.263-2.417-.359-6.513-1.381-9.043 1.635 3.29 4.247 6.197 7.625 7.671 3.378 1.474 7.55 1.334 10.52-.821 2.078-1.508 5.3-7.764 1.797-16.905" fill="#FFFFFE"/><path d="M378.094 284.96c.833.442 1.869.754 3.138.9 1.763.203 3.549-.189 5.109-.983 1.638-.833 2.618-2.835 4.158-3.536 1.59-.724 3.744 1.194 5.16 1.986 1.939 1.085 3.895 2.178 6.032 2.894 4.91 1.643 10.823 2.47 13.658-2.411 3.694-6.357 4.521-15.832 5.63-22.864.318-2.015.591-4.08.184-6.08-1.829-8.976-12.58-3.57-15.275 1.865-1.863 3.757-3.33 15.417-3.733 15.614-.389.191-9.018-6.556-13.06-7.462-4.045-.907-7.187.142-9.615 3.412-3.222 4.338-7.118 13.613-1.386 16.664" fill="#FFFFFE"/></g><path d="M319 82.667V71c.064-13.333 6.73-20 20-20h123c13.333.386 20 7.052 20 20v11.667" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M492 72h-20l10 14z"/><g transform="translate(326 20)"><rect fill="#1955DD" width="148.662" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="24.159" y="28">gets treat</tspan></text></g></g></g></svg>

## 计划状态图 Planning Statecharts

状态图的好处之一是，在将状态图放在一起的过程中，你可以发觉过程中的所有可能状态。 这种探索将帮助你避免代码中的错误，因为能让你覆盖到所有的事件变化。

而且由于状态图是可执行的，它们既可以作为图表，也可以作为代码，从而减少在图表和编码环境之间引入差异或错误解释的可能性。

### 为登录状态机计划一个状态图 Planning a Statechart for a Login Machine

要绘制登录状态机的状态图，首先要列出流程中的基本事件。 想想你的登录过程会 *做* 什么：

- 登进 log in
- 登出 log out

然后列出由于这些事件而存在的 *状态*：

- 已登进 logged in
- 已登出 logged out

一旦有了一些事件和状态，状态图就开始了。

<svg width="780" height="250" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v250H0z"/><path d="M210 100V60c.064-13.334 6.73-20 20-20h315c13.333.385 20 7.052 20 20v39.667M210 150v39.666c.064 13.334 6.73 20 20 20h315c13.333-.385 20-7.052 20-20V150" stroke="#555762" stroke-width="3"/><g transform="translate(484.869 99.667)"><rect fill="#555762" x=".139" y=".333" width="160.861" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="22" y="35">logged in</tspan></text></g><g transform="translate(120.19 99.667)"><rect fill="#555762" x=".157" y=".333" width="180.843" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="22" y="35">logged out</tspan></text></g><g transform="translate(338.5 20)"><rect fill="#1955DD" width="97.778" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.462" y="28">log in</tspan></text></g><g transform="translate(332.5 190)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.375" y="28">log out</tspan></text></g><path fill="#555762" d="M575 88h-20l10 14zM200 162h20l-10-14z"/><g transform="translate(79 97)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g></g></g></svg>

不要忘记 *初始状态*。 在这种情况下，**logged out** 状态是初始状态，因为任何新用户都会进入未登录过程。

## 延迟转换 Delayed Transitions

作为安全措施，某些登进和登出的过程，会在固定时间后，登出非活动用户。

**活动（active）** 和 **空闲（idle）** 状态仅在用户登进时发生，因此它们成为 **登进（logged in）** 复合状态中的子状态。

<svg width="780" height="375" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v375H0z"/><path d="M303.5 45H382c13.333.386 20 7.052 20 20v125.667" stroke="#555762" stroke-width="3"/><g transform="translate(123.19 19.667)"><rect fill="#555762" x=".157" y=".333" width="180.843" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="18.609" y="35">logged out</tspan></text></g><g transform="translate(353.5 80)"><rect fill="#1955DD" width="97.778" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.462" y="28">log in</tspan></text></g><path fill="#555762" d="M412 178h-20l10 14zM203 82h20l-10-14z"/><g transform="translate(82 17)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><rect stroke="#555762" stroke-width="4" fill="#FFF" x="58" y="193" width="667" height="161" rx="20"/><g transform="translate(425.869 269.667)"><rect fill="#555762" x=".087" y=".333" width="99.913" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="25.984" y="35">idle</tspan></text></g><g transform="translate(257.19 269.667)"><rect fill="#555762" x=".111" y=".333" width="127.889" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="24.13" y="35">active</tspan></text></g><g transform="translate(217 264)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g><path d="M71 191h641c8.284 0 15 6.716 15 15v35H56v-35c0-8.284 6.716-15 15-15z" fill="#555762"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(56 191)"><tspan x="274.411" y="35">logged in</tspan></text></g><path stroke="#555762" stroke-width="3" d="M213.5 71.5v120"/><g transform="translate(155.5 110)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.375" y="28">log out</tspan></text></g></g></g></svg>

**logged in** 复合状态中的初始状态是 **active**，因为它是 **log in** 事件的直接结果，登录是用户活动的标志。

*延迟转换（delayed transition）* 是一种在处于某种状态，达到指定时间长度后，发生的转换。 延迟的转换被标记为“之后”和一个固定的持续时间，以指示在转换到下一个指示状态之前应该经过多长时间。

在登进状态图中，**60000** 毫秒或 1 分钟的延迟转换跟随 **active** 状态来确定用户是否 **idle**。 如果在转换达到一分钟之前有 **activity** 事件，则流程返回 **active** 状态。

<svg width="780" height="690" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v690H0z"/><path d="M303.5 45H382c13.333.386 20 7.052 20 20v125.667" stroke="#555762" stroke-width="3"/><g transform="translate(123.19 19.667)"><rect fill="#555762" x=".157" y=".333" width="180.843" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="18.609" y="35">logged out</tspan></text></g><g transform="translate(353.5 80)"><rect fill="#1955DD" width="97.778" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.462" y="28">log in</tspan></text></g><path fill="#555762" d="M412 178h-20l10 14zM203 82h20l-10-14z"/><g transform="translate(82 17)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><rect stroke="#555762" stroke-width="4" fill="#FFF" x="58" y="193" width="667" height="476" rx="20"/><g><g transform="translate(441 587)"><rect stroke="#555762" stroke-width="7" fill="#555762" x="-3.282" y="-3.167" width="258.782" height="57" rx="15"/><rect stroke="#FFF" stroke-width="3" x="-1.282" y="-1.167" width="254.782" height="53" rx="15"/></g><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(441 587)"><tspan x="20.824" y="35">auto logged out</tspan></text></g><path d="M191 341v-40c.064-13.334 6.73-20 20-20h315c13.333.385 20 7.052 20 20v39.667M191 390v39.666c.064 13.334 6.73 20 20 20h315c13.333-.385 20-7.052 20-20V390" stroke="#555762" stroke-width="3"/><g transform="translate(495.869 339.667)"><rect fill="#555762" x=".087" y=".333" width="99.913" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="25.984" y="35">idle</tspan></text></g><g transform="translate(127.19 339.667)"><rect fill="#555762" x=".111" y=".333" width="127.889" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="24.13" y="35">active</tspan></text></g><g transform="translate(277.5 260)"><rect fill="#1955DD" width="180.59" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="19.663" y="28">after 1 minute</tspan></text></g><g transform="translate(313.5 430)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="19.463" y="28">activity</tspan></text></g><path fill="#555762" d="M556 328h-20l10 14zM578 568h-20l10 14zM181 402h20l-10-14z"/><g transform="translate(86 335)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g><path d="M71 191h641c8.284 0 15 6.716 15 15v35H56v-35c0-8.284 6.716-15 15-15z" fill="#555762"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(56 191)"><tspan x="274.411" y="35">logged in</tspan></text></g><path stroke="#555762" stroke-width="3" d="M213.5 71.5v120M567.5 389.5v191"/><g transform="translate(155.5 110)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.375" y="28">log out</tspan></text></g><g transform="translate(464.5 500)"><rect fill="#1955DD" width="204.535" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="23.971" y="28">after 3 minutes</tspan></text></g></g></g></svg>

如果用户保持 **idle** 状态，则在空闲状态之后会延迟 **180000** 毫秒（或 3 分钟）转换到 **自动登出（auto logged out）** 状态。

## 动作 Actions

状态图使用，在状态图之外系统触发的 *actions*。 动作通常也称为 *作用（effects）* 或 *副作用（side-effects）*。 “副作用”听起来像是一个消极或不重要的术语，但引发动作，是使用状态图的主要目的。

动作事件，对后续的其余部分没有影响，事件只是被触发，流程还是原来设置的那样，走下一步。 例如，登录状态图可能会执行更改用户界面的操作。

可以在进入或退出状态或转换时触发 *动作*。状态的操作包含在状态容器内，带有“entry /” 或 “exit /”标签，具体取决于动作是在进入还是退出状态时触发。

在登录状态图中，**idle** 状态有一个进入动作来警告用户他们可能会被登出。

<svg width="780" height="690" xmlns="http://www.w3.org/2000/svg"><style>@font-face{font-family:&quot;TTCommons&quot;;src:url(&quot;https://stately.ai/assets/ttcommons.woff2&quot;) format(&quot;woff2&quot;)}text{font-family:&quot;TTCommons&quot;,Arial,sans-serif;font-variation-settings:&apos;wght&apos; 450}</style><g fill="none" fill-rule="evenodd"><g><path fill="#E3E9F3" d="M0 0h780v690H0z"/><path d="M303.5 45H382c13.333.386 20 7.052 20 20v125.667" stroke="#555762" stroke-width="3"/><g transform="translate(123.19 19.667)"><rect fill="#555762" x=".157" y=".333" width="180.843" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="18.609" y="35">logged out</tspan></text></g><g transform="translate(353.5 80)"><rect fill="#1955DD" width="97.778" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.462" y="28">log in</tspan></text></g><path fill="#555762" d="M412 178h-20l10 14zM203 82h20l-10-14z"/><g transform="translate(82 17)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><rect stroke="#555762" stroke-width="4" fill="#FFF" x="58" y="193" width="667" height="476" rx="20"/><g><g transform="translate(441 587)"><rect stroke="#555762" stroke-width="7" fill="#555762" x="-3.282" y="-3.167" width="258.782" height="57" rx="15"/><rect stroke="#FFF" stroke-width="3" x="-1.282" y="-1.167" width="254.782" height="53" rx="15"/></g><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(441 587)"><tspan x="20.824" y="35">auto logged out</tspan></text></g><path d="M191 341v-40c.064-13.334 6.73-20 20-20h315c13.333.385 20 7.052 20 20v110M150 396v103.666c.064 13.333 6.73 20 20 20h79.5l2.75.334h74.5c13.333-.386 20-7.052 20-20v-39.667" stroke="#555762" stroke-width="3"/><g transform="translate(219.869 410.667)"><rect fill="#555762" y=".333" width="480" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="89.131" y="34.333">entry / warn user about auto logout</tspan></text><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="21.193" y="35">idle</tspan></text></g><g transform="translate(127.19 339.667)"><rect fill="#555762" x=".111" y=".333" width="127.889" height="50" rx="15"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF"><tspan x="24.13" y="35">active</tspan></text></g><g transform="translate(277.5 260)"><rect fill="#1955DD" width="180.59" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="19.663" y="28">after 1 minute</tspan></text></g><g transform="translate(179.5 500)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="19.463" y="28">activity</tspan></text></g><path fill="#555762" d="M556 400h-20l10 14zM578 568h-20l10 14zM140 403h20l-10-14z"/><g transform="translate(86 335)"><path d="M9 9.666c.064 13.333 6.73 20 20 20" stroke="#555762" stroke-width="3"/><path fill="#555762" d="M28 20v20l14-10z"/><circle fill="#555762" cx="10" cy="10" r="10"/></g><g><path d="M71 191h641c8.284 0 15 6.716 15 15v35H56v-35c0-8.284 6.716-15 15-15z" fill="#555762"/><text font-family="TTCommons, Arial, sans-serif" font-size="30" font-weight="400" fill="#FFF" transform="translate(56 191)"><tspan x="274.411" y="35">logged in</tspan></text></g><path stroke="#555762" stroke-width="3" d="M213.5 71.5v120M567.5 460.5v120"/><g transform="translate(155.5 110)"><rect fill="#1955DD" width="113.741" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="20.375" y="28">log out</tspan></text></g><g transform="translate(464.5 500)"><rect fill="#1955DD" width="204.535" height="40" rx="20"/><text font-family="TTCommons, Arial, sans-serif" font-size="24" font-weight="400" fill="#FFF"><tspan x="23.971" y="28">after 3 minutes</tspan></text></g></g></g></svg>

# xState

[中文文档](https://lecepin.github.io/xstate-docs-cn/zh/guides/communication.html#%E5%BC%95%E7%94%A8%E6%9C%8D%E5%8A%A1)

[英文文档](https://xstate.js.org/docs/guides/transitions.html#event-descriptors)

[github地址](https://github.com/statelyai/xstate)

## 基本使用

vanilla js 需要先用 interpret 通过 machine 创建 service, 然后在 service 的基础上通过 send 进行状态流转

react 中可以直接使用 useMachine

> 这两种用法和 api 的差异, 感觉怪怪的

# xState FAQ

## 涉及的概念太多了

useActor 和 useSelector 看不懂是啥意思, 不够直观

## 19 年的时候已经 17k Star 了 23 年才 22K

基本已经退出历史舞台了, 虽然设计很有想法, 但是上手成本太大了. 不利于推广
